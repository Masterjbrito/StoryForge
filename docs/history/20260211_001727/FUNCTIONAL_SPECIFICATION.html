<!doctype html>
<html lang="pt-PT">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>StoryForge - Especificacao Funcional</title>
<style>
:root { --ink:#0f172a; --muted:#475569; --line:#cbd5e1; --accent:#0b2a4a; --soft:#f8fafc; --brand:#0e7490; }
* { box-sizing: border-box; }
body { margin:0; font-family: "Segoe UI", Arial, sans-serif; color:var(--ink); background:#e2e8f0; }
.layout { max-width: 1360px; margin: 28px auto; display:grid; grid-template-columns: 300px minmax(0,1fr); gap:20px; }
.toc { background:#fff; border-radius:12px; box-shadow:0 10px 40px rgba(15,23,42,.12); padding:20px; height: fit-content; position: sticky; top: 16px; max-height: calc(100vh - 32px); overflow:auto; }
.toc h2 { margin:0 0 12px; border:none; padding:0; font-size:18px; color:#0b3b66; }
.toc ul { list-style:none; margin:0; padding:0; }
.toc li { margin:6px 0; }
.toc li.lv1 a { font-weight:700; }
.toc li.lv2 { padding-left:10px; }
.toc li.lv3 { padding-left:20px; }
.toc a { text-decoration:none; color:#1e293b; font-size:13px; }
.toc a:hover { color:#0e7490; text-decoration:underline; }
.page { background:#fff; padding: 44px 52px; border-radius: 12px; box-shadow: 0 10px 40px rgba(15,23,42,.15); }
h1,h2,h3,h4 { page-break-after: avoid; break-after: avoid-page; margin: 22px 0 10px; }
h1 { margin-top:0; font-size: 30px; color: var(--accent); }
h2 { font-size:22px; border-top:1px solid var(--line); padding-top:14px; color:#0b3b66; }
h3 { font-size:17px; color:#1e293b; }
p,li,td,th { font-size: 13px; line-height: 1.5; }
p { margin: 8px 0; color:#1e293b; }
ul,ol { margin: 8px 0 12px 20px; }
code { background:#eef2ff; padding: 1px 5px; border-radius: 4px; font-family: Consolas, monospace; font-size: 12px; }
pre { background:#0b1220; color:#e2e8f0; padding:14px; border-radius:8px; overflow:auto; page-break-inside: avoid; }
table { width:100%; border-collapse: collapse; margin: 12px 0 16px; page-break-inside: avoid; }
th,td { border:1px solid var(--line); padding:8px 9px; vertical-align: top; }
th { background:var(--soft); text-align:left; }
hr { border:none; border-top:1px solid var(--line); margin:16px 0; }
.shot { margin: 14px 0 22px; page-break-inside: avoid; break-inside: avoid; }
.shot img { width: 100%; border:1px solid #cbd5e1; border-radius:10px; display:block; box-shadow:0 8px 26px rgba(2,6,23,.12); }
.shot figcaption { font-size: 12px; color: var(--muted); margin-top: 8px; text-align: center; }
@media print {
  @page { size: A4; margin: 16mm 12mm 16mm 12mm; }
  body { background:#fff; }
  .layout { display:block; max-width:none; margin:0; }
  .toc { display:none; }
  .page { margin:0; max-width:none; box-shadow:none; border-radius:0; padding:0; }
  table, pre, blockquote, ul, ol, .shot { break-inside: avoid; page-break-inside: avoid; }
  h1,h2,h3 { break-after: avoid-page; }
  .shot img { max-height: 232mm; object-fit: contain; }
}
</style>
</head>
<body>
  <div class="layout">
    <nav class="toc"><h2>Indice</h2><ul><li class="lv1"><a href="#storyforge-especificacao-funcional">StoryForge - Especificacao Funcional</a></li><li class="lv2"><a href="#controlo-de-versoes">Controlo de Versoes</a></li><li class="lv3"><a href="#politica-de-versionamento">Politica de Versionamento</a></li><li class="lv3"><a href="#politica-operacional-de-documentacao-obrigatoria">Politica Operacional de Documentacao (Obrigatoria)</a></li><li class="lv2"><a href="#1-visao-geral-da-plataforma">1. Visao Geral da Plataforma</a></li><li class="lv3"><a href="#1-1-proposito">1.1 Proposito</a></li><li class="lv3"><a href="#1-2-o-que-storyforge-nao-faz">1.2 O que StoryForge NAO faz</a></li><li class="lv3"><a href="#1-3-arquitectura-de-ecras">1.3 Arquitectura de Ecras</a></li><li class="lv3"><a href="#1-4-modelo-de-agentes">1.4 Modelo de Agentes</a></li><li class="lv2"><a href="#2-componentes-de-layout">2. Componentes de Layout</a></li><li class="lv3"><a href="#2-1-sidebar">2.1 Sidebar</a></li><li class="lv3"><a href="#2-2-topbar">2.2 Topbar</a></li><li class="lv2"><a href="#3-ecra-dashboard">3. Ecra: Dashboard</a></li><li class="lv3"><a href="#3-1-proposito">3.1 Proposito</a></li><li class="lv3"><a href="#3-2-seccoes-e-funcionalidades">3.2 Seccoes e Funcionalidades</a></li><li class="lv3"><a href="#3-3-dados-mock">3.3 Dados Mock</a></li><li class="lv2"><a href="#4-ecra-novo-projeto">4. Ecra: Novo Projeto</a></li><li class="lv3"><a href="#4-1-proposito">4.1 Proposito</a></li><li class="lv3"><a href="#4-2-navegacao-do-wizard">4.2 Navegacao do Wizard</a></li><li class="lv3"><a href="#4-3-etapas-detalhadas">4.3 Etapas Detalhadas</a></li><li class="lv3"><a href="#4-4-fluxo-de-saida">4.4 Fluxo de Saida</a></li><li class="lv2"><a href="#5-ecra-project-builder-ia-assistant">5. Ecra: Project Builder (IA Assistant)</a></li><li class="lv3"><a href="#5-1-proposito">5.1 Proposito</a></li><li class="lv3"><a href="#5-2-layout-de-3-colunas">5.2 Layout de 3 Colunas</a></li><li class="lv3"><a href="#5-3-cabecalho">5.3 Cabecalho</a></li><li class="lv3"><a href="#5-4-coluna-esquerda-categorias-de-analise">5.4 Coluna Esquerda: Categorias de Analise</a></li><li class="lv3"><a href="#5-5-coluna-central-conversacao">5.5 Coluna Central: Conversacao</a></li><li class="lv3"><a href="#5-6-coluna-direita-artefactos-capturados">5.6 Coluna Direita: Artefactos Capturados</a></li><li class="lv3"><a href="#5-7-modal-de-preview">5.7 Modal de Preview</a></li><li class="lv3"><a href="#5-8-modal-de-detalhe-de-artefacto">5.8 Modal de Detalhe de Artefacto</a></li><li class="lv2"><a href="#6-ecra-project-view">6. Ecra: Project View</a></li><li class="lv3"><a href="#6-1-proposito">6.1 Proposito</a></li><li class="lv3"><a href="#6-2-cabecalho-do-projecto">6.2 Cabecalho do Projecto</a></li><li class="lv3"><a href="#6-3-barra-de-estatisticas-grid-6-colunas">6.3 Barra de Estatisticas (Grid 6 colunas)</a></li><li class="lv3"><a href="#6-4-tabs-de-conteudo">6.4 Tabs de Conteudo</a></li><li class="lv3"><a href="#6-5-hierarquia-da-estrutura-completa">6.5 Hierarquia da Estrutura Completa</a></li><li class="lv3"><a href="#6-6-dados-detalhados-por-projecto">6.6 Dados Detalhados por Projecto</a></li><li class="lv2"><a href="#7-ecra-templates">7. Ecra: Templates</a></li><li class="lv3"><a href="#7-1-proposito">7.1 Proposito</a></li><li class="lv3"><a href="#7-2-kpis-grid-4-colunas">7.2 KPIs (Grid 4 colunas)</a></li><li class="lv3"><a href="#7-3-tabs-de-navegacao">7.3 Tabs de Navegacao</a></li><li class="lv3"><a href="#7-4-filtros">7.4 Filtros</a></li><li class="lv3"><a href="#7-5-card-de-template">7.5 Card de Template</a></li><li class="lv3"><a href="#7-6-templates-mock-8-templates">7.6 Templates Mock (8 templates)</a></li><li class="lv2"><a href="#8-ecra-biblioteca-reutilizavel">8. Ecra: Biblioteca Reutilizavel</a></li><li class="lv3"><a href="#8-1-proposito">8.1 Proposito</a></li><li class="lv3"><a href="#8-2-card-explicativo">8.2 Card Explicativo</a></li><li class="lv3"><a href="#8-3-kpis-grid-4-colunas">8.3 KPIs (Grid 4 colunas)</a></li><li class="lv3"><a href="#8-4-tab-personas">8.4 Tab: Personas</a></li><li class="lv3"><a href="#8-5-tab-regras-de-negocio">8.5 Tab: Regras de Negocio</a></li><li class="lv3"><a href="#8-6-tab-acceptance-criteria">8.6 Tab: Acceptance Criteria</a></li><li class="lv3"><a href="#8-7-tab-test-cases-base">8.7 Tab: Test Cases Base</a></li><li class="lv2"><a href="#9-ecra-integracoes">9. Ecra: Integracoes</a></li><li class="lv3"><a href="#9-1-proposito">9.1 Proposito</a></li><li class="lv3"><a href="#9-2-kpis-grid-3-colunas">9.2 KPIs (Grid 3 colunas)</a></li><li class="lv3"><a href="#9-3-card-de-integracao-por-plataforma">9.3 Card de Integracao (por plataforma)</a></li><li class="lv3"><a href="#9-4-integracoes-mock">9.4 Integracoes Mock</a></li><li class="lv3"><a href="#9-5-card-de-ajuda">9.5 Card de Ajuda</a></li><li class="lv2"><a href="#10-ecra-auditoria-logs">10. Ecra: Auditoria &amp; Logs</a></li><li class="lv3"><a href="#10-1-proposito">10.1 Proposito</a></li><li class="lv3"><a href="#10-2-kpis-grid-4-colunas">10.2 KPIs (Grid 4 colunas)</a></li><li class="lv3"><a href="#10-3-tabela-de-historico-de-accoes">10.3 Tabela de Historico de Accoes</a></li><li class="lv3"><a href="#10-4-card-de-compliance">10.4 Card de Compliance</a></li><li class="lv3"><a href="#10-5-logs-mock-10-entradas">10.5 Logs Mock (10 entradas)</a></li><li class="lv2"><a href="#11-componentes-de-dialogo">11. Componentes de Dialogo</a></li><li class="lv3"><a href="#11-1-addpersonadialog">11.1 AddPersonaDialog</a></li><li class="lv3"><a href="#11-2-addbusinessruledialog">11.2 AddBusinessRuleDialog</a></li><li class="lv3"><a href="#11-3-addacceptancecriteriadialog">11.3 AddAcceptanceCriteriaDialog</a></li><li class="lv3"><a href="#11-4-addtestcasedialog">11.4 AddTestCaseDialog</a></li><li class="lv2"><a href="#12-fluxos-de-utilizador-completos">12. Fluxos de Utilizador Completos</a></li><li class="lv3"><a href="#12-1-fluxo-criar-novo-projecto-end-to-end">12.1 Fluxo: Criar Novo Projecto (end-to-end)</a></li><li class="lv3"><a href="#12-2-fluxo-usar-template">12.2 Fluxo: Usar Template</a></li><li class="lv3"><a href="#12-3-fluxo-consultar-projecto-existente">12.3 Fluxo: Consultar Projecto Existente</a></li><li class="lv3"><a href="#12-4-fluxo-configurar-integracao">12.4 Fluxo: Configurar Integracao</a></li><li class="lv2"><a href="#13-mapeamento-ecra-a-agente">13. Mapeamento Ecra-a-Agente</a></li><li class="lv2"><a href="#14-estado-actual-vs-implementacao-necessaria">14. Estado Actual vs Implementacao Necessaria</a></li><li class="lv3"><a href="#14-1-o-que-existe-frontend-ui-figma">14.1 O que existe (Frontend - UI/Figma)</a></li><li class="lv3"><a href="#14-2-o-que-falta-backend-logica-agentes">14.2 O que falta (Backend / Logica / Agentes)</a></li><li class="lv2"><a href="#15-regras-de-compliance-incorporadas">15. Regras de Compliance Incorporadas</a></li><li class="lv2"><a href="#16-manual-operacional-por-ecra">16. Manual Operacional por Ecra</a></li><li class="lv3"><a href="#16-1-dashboard">16.1 Dashboard</a></li><li class="lv3"><a href="#16-2-novo-projeto">16.2 Novo Projeto</a></li><li class="lv3"><a href="#16-3-project-builder">16.3 Project Builder</a></li><li class="lv3"><a href="#16-4-project-view">16.4 Project View</a></li><li class="lv3"><a href="#16-5-templates">16.5 Templates</a></li><li class="lv3"><a href="#16-6-biblioteca">16.6 Biblioteca</a></li><li class="lv3"><a href="#16-7-integracoes">16.7 Integracoes</a></li><li class="lv3"><a href="#16-8-auditoria-logs">16.8 Auditoria &amp; Logs</a></li><li class="lv2"><a href="#anexo-a-stack-tecnologica">Anexo A: Stack Tecnologica</a></li><li class="lv2"><a href="#anexo-b-referencia-de-ficheiros">Anexo B: Referencia de Ficheiros</a></li><li class="lv2"><a href="#anexo-c-prompt-pack-foundry-9-agentes">Anexo C: Prompt Pack Foundry (9 Agentes)</a></li><li class="lv3"><a href="#c-1-context-ingestor-agent">C.1 Context Ingestor Agent</a></li><li class="lv3"><a href="#c-2-questionnaire-discovery-agent">C.2 Questionnaire / Discovery Agent</a></li><li class="lv3"><a href="#c-3-requirements-generator-agent">C.3 Requirements Generator Agent</a></li><li class="lv3"><a href="#c-4-acceptance-criteria-agent">C.4 Acceptance Criteria Agent</a></li><li class="lv3"><a href="#c-5-test-design-agent">C.5 Test Design Agent</a></li><li class="lv3"><a href="#c-6-quality-gate-linter-agent">C.6 Quality Gate / Linter Agent</a></li><li class="lv3"><a href="#c-7-versioning-diff-agent">C.7 Versioning &amp; Diff Agent</a></li><li class="lv3"><a href="#c-8-export-agent">C.8 Export Agent</a></li><li class="lv3"><a href="#c-9-audit-logging-agent">C.9 Audit &amp; Logging Agent</a></li><li class="lv2"><a href="#anexo-d-screenshots-dos-ecras-estado-atual">Anexo D: Screenshots dos Ecras (Estado Atual)</a></li><li class="lv3"><a href="#d-1-dashboard">D.1 Dashboard</a></li><li class="lv3"><a href="#d-2-novo-projeto">D.2 Novo Projeto</a></li><li class="lv3"><a href="#d-3-project-builder">D.3 Project Builder</a></li><li class="lv3"><a href="#d-4-project-view">D.4 Project View</a></li><li class="lv3"><a href="#d-5-templates">D.5 Templates</a></li><li class="lv3"><a href="#d-6-biblioteca">D.6 Biblioteca</a></li><li class="lv3"><a href="#d-7-integracoes">D.7 Integracoes</a></li><li class="lv3"><a href="#d-8-auditoria-logs">D.8 Auditoria &amp; Logs</a></li><li class="lv2"><a href="#17-estado-runtime-dos-agentes-implementado-em-2026-02-10">17. Estado Runtime dos Agentes (Implementado em 2026-02-10)</a></li><li class="lv3"><a href="#17-1-integracoes-ativas-no-frontend">17.1 Integracoes ativas no frontend</a></li><li class="lv3"><a href="#17-2-comportamento-de-fallback-foundry-mock">17.2 Comportamento de fallback Foundry -&gt; Mock</a></li><li class="lv3"><a href="#17-3-pontos-de-ligacao-para-foundry">17.3 Pontos de ligacao para Foundry</a></li><li class="lv2"><a href="#18-configuracao-foundry-por-ids-de-agente">18. Configuracao Foundry por IDs de Agente</a></li><li class="lv3"><a href="#18-1-automacao-via-azure-cli-script-oficial-do-projeto">18.1 Automacao via Azure CLI (script oficial do projeto)</a></li><li class="lv2"><a href="#19-prompt-master-por-agente-copy-paste-foundry">19. Prompt Master por Agente (Copy/Paste Foundry)</a></li><li class="lv3"><a href="#19-1-prompt-global-base-usar-em-todos-os-agentes">19.1 Prompt Global Base (usar em TODOS os agentes)</a></li><li class="lv3"><a href="#19-2-context-ingestor-agent">19.2 Context Ingestor Agent</a></li><li class="lv3"><a href="#19-3-questionnaire-discovery-agent">19.3 Questionnaire / Discovery Agent</a></li><li class="lv3"><a href="#19-4-requirements-generator-agent">19.4 Requirements Generator Agent</a></li><li class="lv3"><a href="#19-5-acceptance-criteria-agent">19.5 Acceptance Criteria Agent</a></li><li class="lv3"><a href="#19-6-test-design-agent">19.6 Test Design Agent</a></li><li class="lv3"><a href="#19-7-quality-gate-linter-agent">19.7 Quality Gate / Linter Agent</a></li><li class="lv3"><a href="#19-8-versioning-diff-agent">19.8 Versioning &amp; Diff Agent</a></li><li class="lv3"><a href="#19-9-export-agent">19.9 Export Agent</a></li><li class="lv3"><a href="#19-10-audit-logging-agent">19.10 Audit &amp; Logging Agent</a></li></ul></nav>
    <main class="page"><h1 id="storyforge-especificacao-funcional">StoryForge - Especificacao Funcional</h1><p><strong>Versao:</strong> 1.5.0 <strong>Data:</strong> 2026-02-10 <strong>Classificacao:</strong> Confidencial - Uso Interno <strong>Autor:</strong> Arquitectura de Sistema <strong>Fonte de Verdade UI:</strong> Figma (imutavel) <strong>Plataforma Alvo:</strong> Banca Portuguesa (Enterprise)</p><p>---</p><h2 id="controlo-de-versoes">Controlo de Versoes</h2><table><thead><tr><th>Versao</th><th>Data</th><th>Tipo</th><th>Descricao</th></tr></thead><tbody><tr><td>1.5.0</td><td>2026-02-10</td><td>MINOR</td><td>Instrucoes completas copy/paste para os 9 agentes diretamente no documento principal</td></tr><tr><td>1.4.2</td><td>2026-02-10</td><td>PATCH</td><td><code>foundry-login.ps1</code> resiliente: quando auto-discovery falha, gera <code>.env.local</code> e pede IDs manuais sem bloquear</td></tr><tr><td>1.4.1</td><td>2026-02-10</td><td>PATCH</td><td>Script operativo <code>foundry-login.ps1</code> para login Azure CLI, descoberta de agentes e geracao automatica de <code>.env.local</code></td></tr><tr><td>1.4.0</td><td>2026-02-10</td><td>MINOR</td><td>Configuracao Foundry por IDs de agente + melhoria de legibilidade HTML/PDF (indice automatico)</td></tr><tr><td>1.3.0</td><td>2026-02-10</td><td>MINOR</td><td>Integracao runtime de agentes nas paginas New Project, Project Builder, Project View e Integracoes</td></tr><tr><td>1.2.0</td><td>2026-02-10</td><td>MINOR</td><td>Politica obrigatoria de atualizacao documental + screenshots dos 8 ecras</td></tr><tr><td>1.1.0</td><td>2026-02-10</td><td>MINOR</td><td>Especificacao operacional dos 9 agentes + prompt pack Foundry</td></tr><tr><td>1.0.0</td><td>2026-02-10</td><td>MAJOR</td><td>Versao inicial - documentacao de todos os ecras</td></tr></tbody></table><h3 id="politica-de-versionamento">Politica de Versionamento</h3><ul><li><strong>MAJOR (X.0.0):</strong> Novo ecra adicionado, alteracao estrutural do fluxo, novo modulo funcional</li><li><strong>MINOR (1.X.0):</strong> Nova funcionalidade dentro de ecra existente, novo campo, nova accao de utilizador</li><li><strong>PATCH (1.0.X):</strong> Correccao de descricao, clarificacao de regra, actualizacao de referencia</li></ul><h3 id="politica-operacional-de-documentacao-obrigatoria">Politica Operacional de Documentacao (Obrigatoria)</h3><p>Regra operacional do projeto:</p><ol><li>Qualquer alteracao funcional, tecnica ou de integracao deve atualizar este documento na mesma iteracao.</li><li>Nenhum ficheiro documental existente deve ser apagado sem snapshot previo em <code>docs/history/&lt;timestamp&gt;/</code>.</li><li>O estado atual deve manter-se em:</li></ol><p>   - <code>docs/FUNCTIONAL_SPECIFICATION.md</code>    - <code>docs/FUNCTIONAL_SPECIFICATION.html</code>    - <code>docs/FUNCTIONAL_SPECIFICATION.pdf</code></p><ol><li>O historico deve ser acumulativo e indexado em <code>docs/history/HISTORY_INDEX.md</code>.</li><li>Sempre que relevante, devem ser incluidos screenshots atualizados dos ecras para facilitar interpretacao.</li></ol><p>---</p><h2 id="1-visao-geral-da-plataforma">1. Visao Geral da Plataforma</h2><h3 id="1-1-proposito">1.1 Proposito</h3><p>StoryForge e uma plataforma enterprise para criacao estruturada de artefactos de requisitos (Epics, Features, User Stories, Tasks, Test Cases) com foco no sector bancario portugues. Utiliza agentes de IA como copiloto para gerar, validar e exportar artefactos prontos para publicacao em Jira Cloud e Azure DevOps.</p><h3 id="1-2-o-que-storyforge-nao-faz">1.2 O que StoryForge NAO faz</h3><ul><li>NAO gere sprints</li><li>NAO gere execucao de trabalho</li><li>NAO replica Jira ou Azure DevOps</li><li>NAO e uma ferramenta de gestao de projecto</li></ul><h3 id="1-3-arquitectura-de-ecras">1.3 Arquitectura de Ecras</h3><pre><code>StoryForge
|
+-- Layout Global
|   +-- Sidebar (navegacao principal)
|   +-- Topbar (accoes globais, notificacoes, perfil)
|
+-- Ecras Principais
|   +-- Dashboard (visao geral)
|   +-- Novo Projeto (wizard 6 etapas)
|   +-- Project Builder (IA Assistant - questionario)
|   +-- Project View (visualizacao hierarquica)
|
+-- Recursos
|   +-- Templates (biblioteca de templates)
|   +-- Biblioteca (componentes reutilizaveis)
|
+-- Administracao
|   +-- Integracoes (Jira, Azure DevOps)
|   +-- Auditoria &amp; Logs (compliance)</code></pre><h3 id="1-4-modelo-de-agentes">1.4 Modelo de Agentes</h3><p>Todos os processos de IA sao executados por agentes desacoplados. O sistema e vendor-agnostic (Foundry como default, substituivel por Claude sub-agents, OpenAI agents, LangGraph ou orquestrador proprio).</p><p>Agentes conceptuais mapeados:</p><table><thead><tr><th>Agente</th><th>Ecra(s) onde actua</th></tr></thead><tbody><tr><td>Context Ingestor Agent</td><td>Novo Projeto (Steps 1-6)</td></tr><tr><td>Questionnaire / Discovery Agent</td><td>Project Builder (conversacao)</td></tr><tr><td>Requirements Generator Agent</td><td>Project Builder (painel direito)</td></tr><tr><td>Acceptance Criteria Agent</td><td>Project Builder, Project View</td></tr><tr><td>Test Design Agent</td><td>Project Builder, Project View</td></tr><tr><td>Quality Gate / Linter Agent</td><td>Project Builder (indicadores)</td></tr><tr><td>Versioning &amp; Diff Agent</td><td>Project View (historico)</td></tr><tr><td>Export Agent</td><td>Dashboard, Project View, Integracoes</td></tr><tr><td>Audit &amp; Logging Agent</td><td>Auditoria &amp; Logs (transversal)</td></tr></tbody></table><p>---</p><h2 id="2-componentes-de-layout">2. Componentes de Layout</h2><h3 id="2-1-sidebar">2.1 Sidebar</h3><p><strong>Ficheiro:</strong> <code>src/app/components/layout/sidebar.tsx</code></p><p><strong>Estrutura de Navegacao:</strong></p><table><thead><tr><th>Seccao</th><th>Item</th><th>View Target</th><th>Icone</th></tr></thead><tbody><tr><td>Principal</td><td>Dashboard</td><td><code>dashboard</code></td><td>LayoutDashboard</td></tr><tr><td>Recursos</td><td>Templates</td><td><code>templates</code></td><td>FileStack</td></tr><tr><td>Recursos</td><td>Biblioteca</td><td><code>library</code></td><td>Library</td></tr><tr><td>Administracao</td><td>Integracoes</td><td><code>integrations</code></td><td>Link2</td></tr><tr><td>Administracao</td><td>Auditoria &amp; Logs</td><td><code>audit</code></td><td>FileSearch</td></tr></tbody></table><p><strong>Funcionalidades:</strong></p><ul><li>Navegacao entre ecras via click</li><li>Indicador visual do ecra activo (fundo escuro)</li><li>Indicador PSD2 Compliant no rodape</li><li>Largura fixa: 264px</li><li>Branding StoryForge no topo</li></ul><p><strong>Notas:</strong></p><ul><li>Os ecras <code>new-project</code>, <code>project-builder</code> e <code>project-view</code> NAO aparecem na sidebar - sao acedidos por accoes contextuais</li><li>O estado <code>currentView</code> e gerido no <code>App.tsx</code> via <code>useState</code></li></ul><h3 id="2-2-topbar">2.2 Topbar</h3><p><strong>Ficheiro:</strong> <code>src/app/components/layout/topbar.tsx</code></p><p><strong>Funcionalidades:</strong></p><table><thead><tr><th>Elemento</th><th>Accao</th></tr></thead><tbody><tr><td>Workspace Badge</td><td>Exibe organizacao activa ("Ageas Portugal")</td></tr><tr><td>Pesquisa Global</td><td>Campo de pesquisa para projectos e artefactos</td></tr><tr><td>Botao "Novo Projeto"</td><td>Navega para ecra <code>new-project</code></td></tr><tr><td>Notificacoes (sino)</td><td>Dropdown com lista de notificacoes</td></tr><tr><td>Perfil do Utilizador</td><td>Dropdown com opcoes de conta</td></tr></tbody></table><p><strong>Sistema de Notificacoes:</strong></p><ul><li>Tipos: <code>success</code>, <code>warning</code>, <code>info</code></li><li>Badge numerica com contagem de nao-lidas</li><li>Accoes: Marcar como lida, Eliminar individual, Marcar todas como lidas, Limpar todas</li><li>Cada notificacao inclui: titulo, mensagem, timestamp relativo, projecto associado (opcional)</li><li>Indicador visual de nao-lida (ponto azul)</li></ul><p><strong>Menu de Utilizador:</strong></p><ul><li>Conta Verificada (estado)</li><li>Configuracoes de Seguranca</li><li>Configuracoes de Conta</li><li>Sair</li></ul><p>---</p><h2 id="3-ecra-dashboard">3. Ecra: Dashboard</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/dashboard.tsx</code> <strong>Rota interna:</strong> <code>dashboard</code> <strong>Agentes envolvidos:</strong> Export Agent (accoes), Audit &amp; Logging Agent (actividade recente)</p><h3 id="3-1-proposito">3.1 Proposito</h3><p>Visao geral consolidada de todos os projectos publicados, metricas de qualidade, compliance e actividade recente. Ponto de entrada principal da plataforma.</p><h3 id="3-2-seccoes-e-funcionalidades">3.2 Seccoes e Funcionalidades</h3><h4 id="3-2-1-kpis-principais-grid-4-colunas">3.2.1 KPIs Principais (Grid 4 colunas)</h4><table><thead><tr><th>KPI</th><th>Valor Fonte</th><th>Indicador</th></tr></thead><tbody><tr><td>Projectos Publicados</td><td>Contagem de projectos</td><td>Tendencia (+N)</td></tr><tr><td>Artefactos Criados</td><td>Soma de EP+FT+US+TSK+TC</td><td>Tendencia (+N)</td></tr><tr><td>Qualidade Media</td><td>Media de <code>qualityScore</code> dos proj.</td><td>Percentagem</td></tr><tr><td>Compliance</td><td>Projectos conformes</td><td>Percentagem 100%</td></tr></tbody></table><h4 id="3-2-2-estatisticas-secundarias-grid-3-colunas">3.2.2 Estatisticas Secundarias (Grid 3 colunas)</h4><table><thead><tr><th>Card</th><th>Conteudo</th></tr></thead><tbody><tr><td>Top Compliance Tags</td><td>Barras de progresso por tag (PSD2, GDPR, etc.)</td></tr><tr><td>Distribuicao por Tipo</td><td>Barras por tipo (Mobile, Web, Core, API, Backoffice)</td></tr><tr><td>Actividade Recente</td><td>Lista cronologica de ultimas accoes</td></tr></tbody></table><h4 id="3-2-3-tabela-de-projectos-publicados">3.2.3 Tabela de Projectos Publicados</h4><p><strong>Filtros disponiveis:</strong></p><ul><li>Pesquisa por nome ou codigo (texto livre)</li><li>Tipo de Projecto (select: Mobile Banking, Web Banking, Core Banking, APIs/Open Banking, Backoffice)</li><li>Plataforma (select: Jira Cloud, Azure DevOps)</li><li>Departamento (select: dinamico baseado nos projectos)</li></ul><p><strong>Colunas da tabela:</strong></p><table><thead><tr><th>Coluna</th><th>Conteudo</th></tr></thead><tbody><tr><td>Projecto</td><td>Nome + Codigo interno (font-mono)</td></tr><tr><td>Departamento</td><td>Texto</td></tr><tr><td>Tipo</td><td>Badge</td></tr><tr><td>Plataforma</td><td>Texto</td></tr><tr><td>Artefactos</td><td>Badges com contagem (EP, FT, US)</td></tr><tr><td>Qualidade</td><td>Barra de progresso + percentagem colorida</td></tr><tr><td>Compliance</td><td>Badges verdes (max 2 visiveis + "+N")</td></tr><tr><td>Ultima Exportacao</td><td>Data formatada PT-PT + nome do ultimo editor</td></tr><tr><td>Status</td><td>Badge "Publicado" ou "Rascunho"</td></tr><tr><td>Accoes</td><td>Menu dropdown (3 pontos)</td></tr></tbody></table><p><strong>Accoes por projecto (dropdown):</strong></p><ul><li>Ver Estrutura Completa (navega para <code>project-view</code>)</li><li>Historico de Versoes</li><li>Abrir em [Plataforma] (link externo)</li><li>Exportar Novamente</li><li>Duplicar Projecto</li></ul><p><strong>Paginacao:</strong> Presente mas estatica (sem logica backend implementada)</p><p><strong>Accao global:</strong> Exportar CSV (botao no cabecalho da tabela)</p><h3 id="3-3-dados-mock">3.3 Dados Mock</h3><p>6 projectos de demonstracao com dados realistas de banca portuguesa:</p><ul><li>MBWAY-2024 (Digital Payments)</li><li>HBEMP-2024 (Corporate Banking)</li><li>MOBPART-2024 (Retail Banking)</li><li>MBATM-2024 (Channels &amp; Payments)</li><li>OPENAPI-2024 (Open Banking)</li><li>BACKOPS-2024 (Operations)</li></ul><p>---</p><h2 id="4-ecra-novo-projeto">4. Ecra: Novo Projeto</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/new-project.tsx</code> <strong>Rota interna:</strong> <code>new-project</code> <strong>Agentes envolvidos:</strong> Context Ingestor Agent (todas as etapas)</p><h3 id="4-1-proposito">4.1 Proposito</h3><p>Wizard de 6 etapas para configuracao completa de um novo projecto. Recolhe toda a informacao necessaria antes de iniciar a sessao com o IA Assistant.</p><h3 id="4-2-navegacao-do-wizard">4.2 Navegacao do Wizard</h3><ul><li>Botao "Voltar ao Dashboard" (topo)</li><li>Stepper visual com 6 etapas (icones + estado: pendente/actual/completo)</li><li>Botoes "Anterior" e "Proximo" no rodape</li><li>Ultimo passo: "Iniciar IA Assistant" (navega para <code>project-builder</code>)</li></ul><h3 id="4-3-etapas-detalhadas">4.3 Etapas Detalhadas</h3><h4 id="etapa-1-identidade-do-projeto">Etapa 1: Identidade do Projeto</h4><table><thead><tr><th>Campo</th><th>Tipo</th><th>Obrigatorio</th><th>Notas</th></tr></thead><tbody><tr><td>Nome do Projecto</td><td>Input texto</td><td>Sim</td><td>Ex: "Sistema de Pagamentos MB Way"</td></tr><tr><td>Codigo Interno</td><td>Input texto</td><td>Sim</td><td>Auto-uppercase. Ex: "MBWAY-2024"</td></tr><tr><td>Departamento / Area</td><td>Input texto</td><td>Sim</td><td>Area responsavel dentro do banco</td></tr><tr><td>Tipo de Projecto</td><td>Multi-select</td><td>Sim</td><td>Mobile, Web, Backoffice, APIs</td></tr><tr><td>Canal</td><td>Single-select</td><td>Sim</td><td>Particulares, Empresas, Corporate, Interno</td></tr><tr><td>Plataforma Alvo</td><td>Single-select</td><td>Sim</td><td>Jira Cloud, Azure DevOps, Ambos</td></tr></tbody></table><h4 id="etapa-2-contexto-bancario">Etapa 2: Contexto Bancario</h4><table><thead><tr><th>Campo</th><th>Tipo</th><th>Obrigatorio</th><th>IA Assist</th></tr></thead><tbody><tr><td>Objectivo de Negocio</td><td>Textarea</td><td>Sim</td><td>Sim</td></tr><tr><td>Produto Bancario</td><td>Multi-select</td><td>Sim</td><td>Nao</td></tr><tr><td>Jornada Principal</td><td>Textarea</td><td>Nao</td><td>Sim</td></tr></tbody></table><p><strong>Produtos Bancarios:</strong> Contas, Cartoes, Pagamentos, Credito, Investimentos, Onboarding</p><p><strong>Botao "Melhorar com IA":</strong> Presente nos campos Textarea - acciona agente para melhorar texto com contexto bancario, compliance e estrutura profissional.</p><h4 id="etapa-3-compliance-seguranca">Etapa 3: Compliance &amp; Seguranca</h4><table><thead><tr><th>Item</th><th>Descricao</th></tr></thead><tbody><tr><td>PSD2</td><td>Payment Services Directive 2</td></tr><tr><td>SCA</td><td>Strong Customer Authentication</td></tr><tr><td>GDPR</td><td>Proteccao de dados pessoais</td></tr><tr><td>Banco de Portugal</td><td>Regulamentacao nacional</td></tr><tr><td>SIBS / MB Way</td><td>Integracao rede nacional</td></tr><tr><td>AML / KYC</td><td>Anti-lavagem e conhecimento cliente</td></tr></tbody></table><p>Multi-select com checkboxes visuais. Cada item tem label + descricao.</p><h4 id="etapa-4-sistemas-integracoes">Etapa 4: Sistemas &amp; Integracoes</h4><table><thead><tr><th>Campo</th><th>Tipo</th><th>IA Assist</th></tr></thead><tbody><tr><td>Core Banking</td><td>Input texto</td><td>Nao</td></tr><tr><td>Sistemas Internos</td><td>Textarea</td><td>Sim</td></tr><tr><td>APIs Externas</td><td>Textarea</td><td>Sim</td></tr></tbody></table><h4 id="etapa-5-input-documental">Etapa 5: Input Documental</h4><table><thead><tr><th>Elemento</th><th>Tipo</th><th>IA Assist</th></tr></thead><tbody><tr><td>Upload de Ficheiros</td><td>Drag &amp; Drop (PDF, imagens, docs)</td><td>Nao</td></tr><tr><td>Links Externos</td><td>Textarea (font-mono)</td><td>Sim</td></tr><tr><td>Notas Adicionais</td><td>Textarea</td><td>Sim</td></tr></tbody></table><h4 id="etapa-6-configuracao-ia">Etapa 6: Configuracao IA</h4><table><thead><tr><th>Campo</th><th>Opcoes</th></tr></thead><tbody><tr><td>Modo de Operacao</td><td>Standard, Rigor Bancario (recomendado), Auditoria-Ready</td></tr><tr><td>Profundidade de Analise</td><td>Normal, Alta, Maxima</td></tr></tbody></table><p>Nota informativa no final: "O IA Assistant ira guia-lo atraves de 6 categorias de perguntas..."</p><h3 id="4-4-fluxo-de-saida">4.4 Fluxo de Saida</h3><p>Ao clicar "Iniciar IA Assistant" na Etapa 6:</p><ol><li><code>formData</code> e passado via <code>onCreate(data)</code> ao <code>App.tsx</code></li><li><code>projectData</code> e armazenado no estado</li><li>Navegacao para <code>project-builder</code></li></ol><p>---</p><h2 id="5-ecra-project-builder-ia-assistant">5. Ecra: Project Builder (IA Assistant)</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/project-builder.tsx</code> <strong>Rota interna:</strong> <code>project-builder</code> <strong>Agentes envolvidos:</strong> Questionnaire/Discovery Agent, Requirements Generator Agent, Acceptance Criteria Agent, Test Design Agent, Quality Gate/Linter Agent</p><h3 id="5-1-proposito">5.1 Proposito</h3><p>Interface conversacional com o IA Assistant para construcao estruturada de requisitos. O agente faz perguntas organizadas em 6 categorias e gera artefactos automaticamente a partir das respostas.</p><h3 id="5-2-layout-de-3-colunas">5.2 Layout de 3 Colunas</h3><pre><code>+------------------+-------------------------+------------------+
| Categorias (280px)|  Conversacao (flex-1)   | Artefactos (384px)|
|                   |                         |                  |
| - Progresso       | - Mensagens             | - Contadores     |
| - 6 categorias    | - Input                 | - Lista recentes |
| - Dica inteligente| - Sugestoes             | - Qualidade      |
+------------------+-------------------------+------------------+</code></pre><h3 id="5-3-cabecalho">5.3 Cabecalho</h3><table><thead><tr><th>Elemento</th><th>Funcao</th></tr></thead><tbody><tr><td>Botao "Voltar"</td><td>Regressa ao Dashboard</td></tr><tr><td>Titulo</td><td>"IA Assistant - Estrutura de Requisitos"</td></tr><tr><td>Subtitulo</td><td>Nome do projecto</td></tr><tr><td>Badge Modo</td><td>Modo activo (ex: "Rigor Bancario")</td></tr><tr><td>Botao "Preview"</td><td>Abre modal com preview da estrutura</td></tr><tr><td>Botao "Finalizar"</td><td>Activo so quando todas as perguntas respondidas</td></tr><tr><td>Barra de Progresso</td><td>Percentagem geral + contagem de perguntas</td></tr></tbody></table><h3 id="5-4-coluna-esquerda-categorias-de-analise">5.4 Coluna Esquerda: Categorias de Analise</h3><p>6 categorias com progresso individual:</p><table><thead><tr><th>Categoria</th><th>Total Perguntas</th><th>Icone</th></tr></thead><tbody><tr><td>Personas e Utilizadores</td><td>6</td><td>--</td></tr><tr><td>Jornadas de Utilizador</td><td>5</td><td>--</td></tr><tr><td>Regras de Negocio</td><td>5</td><td>--</td></tr><tr><td>Excepcoes e Casos Limite</td><td>4</td><td>--</td></tr><tr><td>Compliance e Seguranca</td><td>4</td><td>--</td></tr><tr><td>Testes e Validacao</td><td>4</td><td>--</td></tr><tr><td><strong>TOTAL</strong></td><td><strong>28</strong></td><td></td></tr></tbody></table><p>Cada categoria exibe:</p><ul><li>Icone + titulo</li><li>Estado: <code>pending</code> / <code>in-progress</code> / <code>completed</code></li><li>Contagem: "X/Y perguntas"</li><li>Barra de progresso individual</li></ul><p><strong>Dica Inteligente</strong> (rodape): Texto informativo sobre como responder.</p><h3 id="5-5-coluna-central-conversacao">5.5 Coluna Central: Conversacao</h3><p><strong>Mensagens do Assistente:</strong></p><ul><li>Avatar: icone Sparkles em fundo escuro</li><li>Card branco com borda</li><li>Timestamp em formato PT-PT (HH:MM)</li><li>Badges de artefactos gerados (ex: "+2 User Stories", "+1 Feature")</li></ul><p><strong>Mensagens do Utilizador:</strong></p><ul><li>Card escuro (fundo slate-900, texto branco)</li><li>Avatar: iniciais do utilizador</li><li>Timestamp</li></ul><p><strong>Area de Input:</strong></p><ul><li>Sugestoes contextuais (botoes clicaveis que preenchem o textarea)</li><li>Textarea com placeholder "Digite a sua resposta detalhada..."</li><li>Botao de envio (icone Send)</li><li>Atalhos: Enter para enviar, Shift+Enter para nova linha</li></ul><p><strong>Fluxo de Conversacao:</strong></p><ol><li>Mensagem de boas-vindas</li><li>Introducao da categoria actual</li><li>Pergunta N de M</li><li>Utilizador responde</li><li>IA confirma artefactos gerados</li><li>Proxima pergunta (ou proxima categoria se completa)</li><li>Ao completar todas: mensagem de conclusao</li></ol><h3 id="5-6-coluna-direita-artefactos-capturados">5.6 Coluna Direita: Artefactos Capturados</h3><p><strong>Contadores (Grid 2x2):</strong></p><table><thead><tr><th>Card</th><th>Cor</th><th>Valor Mock</th></tr></thead><tbody><tr><td>Epics</td><td>Azul</td><td>3</td></tr><tr><td>Features</td><td>Roxo</td><td>8</td></tr><tr><td>User Stories</td><td>Verde</td><td>24</td></tr><tr><td>Test Cases</td><td>Laranja</td><td>45</td></tr></tbody></table><p><strong>Lista de Artefactos Recentes:</strong></p><ul><li>Cada artefacto mostra: ID, titulo, nivel de confianca (%), fonte</li><li>Accoes: "Ver" (abre modal detalhado) e "Editar" (alerta placeholder)</li></ul><p><strong>Indicadores de Qualidade:</strong></p><table><thead><tr><th>Indicador</th><th>Valor Mock</th></tr></thead><tbody><tr><td>Cobertura de Requisitos</td><td>85%</td></tr><tr><td>Compliance PSD2</td><td>100%</td></tr><tr><td>Test Coverage</td><td>72%</td></tr></tbody></table><p><strong>Alerta de Compliance:</strong> Card amarelo com aviso sobre cenarios em falta (ex: testes SCA).</p><h3 id="5-7-modal-de-preview">5.7 Modal de Preview</h3><p>Exibe resumo da estrutura gerada:</p><ul><li>Epics (lista)</li><li>Features (lista)</li><li>User Stories (lista com "+N more...")</li><li>Test Cases (descricao resumida)</li><li>Botoes: "Finalizar e Exportar" ou "Continuar a Editar"</li></ul><h3 id="5-8-modal-de-detalhe-de-artefacto">5.8 Modal de Detalhe de Artefacto</h3><p>Exibe detalhes completos de um artefacto:</p><ul><li>ID + Titulo + Icone tipo</li><li>Descricao (formato User Story: Como/Eu quero/Para que)</li><li>Criterios de Aceitacao (lista com checks)</li><li>Story Points, Prioridade, Confianca IA</li><li>Fonte (de onde foi inferido)</li><li>Tags</li><li>Botoes: "Editar Artefacto" ou "Fechar"</li></ul><p>---</p><h2 id="6-ecra-project-view">6. Ecra: Project View</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/project-view.tsx</code> <strong>Rota interna:</strong> <code>project-view</code> <strong>Agentes envolvidos:</strong> Versioning &amp; Diff Agent, Export Agent</p><h3 id="6-1-proposito">6.1 Proposito</h3><p>Visualizacao completa e hierarquica de um projecto publicado. Permite navegar pela estrutura Epic &gt; Feature &gt; User Story &gt; Tasks + Test Cases.</p><h3 id="6-2-cabecalho-do-projecto">6.2 Cabecalho do Projecto</h3><table><thead><tr><th>Elemento</th><th>Conteudo</th></tr></thead><tbody><tr><td>Icone</td><td>Building2 em fundo escuro</td></tr><tr><td>Nome</td><td>Nome completo do projecto</td></tr><tr><td>Codigo</td><td>Badge mono (ex: MBWAY-2024)</td></tr><tr><td>Versao</td><td>Badge verde (ex: v2.1.0)</td></tr><tr><td>Departamento</td><td>Texto</td></tr><tr><td>Tipo</td><td>Badge secundario</td></tr><tr><td>Descricao</td><td>Texto descritivo do projecto</td></tr><tr><td>Metadados</td><td>Data criacao, data exportacao, autor, score qualidade</td></tr></tbody></table><p><strong>Accoes:</strong></p><ul><li>Botao "Exportar"</li><li>Botao "Abrir em [Plataforma]" (link externo)</li><li>Menu dropdown: Historico de Versoes, Duplicar Projecto, Exportar Novamente</li></ul><h3 id="6-3-barra-de-estatisticas-grid-6-colunas">6.3 Barra de Estatisticas (Grid 6 colunas)</h3><table><thead><tr><th>Metrica</th><th>Icone</th><th>Cor</th></tr></thead><tbody><tr><td>Epics</td><td>Layers</td><td>Azul</td></tr><tr><td>Features</td><td>Boxes</td><td>Roxo</td></tr><tr><td>User Stories</td><td>FileText</td><td>Verde</td></tr><tr><td>Tasks</td><td>CheckSquare</td><td>Laranja</td></tr><tr><td>Test Cases</td><td>FlaskConical</td><td>Indigo</td></tr><tr><td>Story Points</td><td>Tag</td><td>Rosa</td></tr></tbody></table><h3 id="6-4-tabs-de-conteudo">6.4 Tabs de Conteudo</h3><table><thead><tr><th>Tab</th><th>Conteudo</th></tr></thead><tbody><tr><td>Estrutura Completa</td><td>Arvore hierarquica expandivel</td></tr><tr><td>Visao Geral</td><td>Lista de objectivos do projecto</td></tr><tr><td>Compliance</td><td>Tags de compliance com icones</td></tr><tr><td>Historico Exportacoes</td><td>Placeholder para historico de exportacoes</td></tr></tbody></table><p><strong>Botao "Mostrar/Ocultar Detalhes":</strong> Toggle global para expandir/colapsar detalhes em todos os niveis.</p><h3 id="6-5-hierarquia-da-estrutura-completa">6.5 Hierarquia da Estrutura Completa</h3><pre><code>Epic (EP-XXX)
  |-- Valor de Negocio
  |-- Criterios de Aceitacao
  |
  +-- Feature (FT-XXX)
       |-- Descricao
       |-- Regras de Negocio
       |
       +-- User Story (US-XXX)
            |-- Como / Eu quero / Para que
            |-- Criterios de Aceitacao
            |-- Story Points, Prioridade, Labels
            |
            +-- Tasks (TSK-XXX)
            |    |-- Titulo + Descricao
            |    |-- Notas Tecnicas
            |    |-- Estimativa, Assignee, Status
            |
            +-- Test Cases (TC-XXX)
                 |-- Tipo (Functional, Security, Performance, Compliance)
                 |-- Prioridade (Critical, High, Medium)
                 |-- Pre-condicoes
                 |-- Passos (numerados)
                 |-- Resultado Esperado
                 |-- Dados de Teste</code></pre><p>Cada nivel tem:</p><ul><li>Botao expand/collapse (chevron)</li><li>Badge de ID (cor por tipo)</li><li>Badge de prioridade (vermelho=High/Critical, amarelo=Medium, verde=Low)</li><li>Badge de status</li></ul><h3 id="6-6-dados-detalhados-por-projecto">6.6 Dados Detalhados por Projecto</h3><p>O ficheiro contem dados mock completos para 7 projectos (IDs: 999, 1-6), com o projecto ID=1 (MBWAY-2024) a conter a hierarquia mais completa:</p><ul><li>3 Epics</li><li>2 Features (no EP-001)</li><li>3 User Stories (no FT-001)</li><li>11 Tasks detalhadas</li><li>8 Test Cases completos (com pre-condicoes, passos, resultado esperado, dados de teste)</li></ul><p>---</p><h2 id="7-ecra-templates">7. Ecra: Templates</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/templates.tsx</code> <strong>Rota interna:</strong> <code>templates</code> <strong>Agentes envolvidos:</strong> Context Ingestor Agent (ao usar template)</p><h3 id="7-1-proposito">7.1 Proposito</h3><p>Catalogo de templates pre-configurados para acelerar a criacao de projectos bancarios. Cada template contem estrutura base de Epics, Features, User Stories, Tasks e Test Cases.</p><h3 id="7-2-kpis-grid-4-colunas">7.2 KPIs (Grid 4 colunas)</h3><table><thead><tr><th>KPI</th><th>Valor</th></tr></thead><tbody><tr><td>Templates Disponiveis</td><td>Contagem total</td></tr><tr><td>Destacados</td><td>Contagem de featured</td></tr><tr><td>Vezes Utilizados</td><td>Soma de usage de todos os templates</td></tr><tr><td>Rating Medio</td><td>Media de ratings</td></tr></tbody></table><h3 id="7-3-tabs-de-navegacao">7.3 Tabs de Navegacao</h3><table><thead><tr><th>Tab</th><th>Logica de Ordenacao</th></tr></thead><tbody><tr><td>Todos</td><td>Lista completa filtrada</td></tr><tr><td>Destacados</td><td>Apenas templates com <code>featured: true</code></td></tr><tr><td>Mais Usados</td><td>Ordenado por <code>usage</code> (descendente)</td></tr><tr><td>Recentes</td><td>Ordenado por <code>lastUpdated</code> (descendente)</td></tr></tbody></table><h3 id="7-4-filtros">7.4 Filtros</h3><ul><li>Pesquisa por nome ou descricao (texto livre)</li><li>Categoria (select: Mobile Banking, Pagamentos, Web Banking, APIs/Open Banking, Onboarding, Cartoes, Backoffice, Core Banking)</li></ul><h3 id="7-5-card-de-template">7.5 Card de Template</h3><p>Cada card exibe:</p><ul><li>Nome + icone estrela (se featured)</li><li>Descricao (max 2 linhas)</li><li>Categoria (badge), Rating (estrela + numero), Uso (Nx usado)</li><li>Grid de estatisticas: Epics, Features, US, Tasks, Tests</li><li>Tags de compliance</li><li>Tags de funcionalidade</li><li>Autor + Data de ultima actualizacao</li><li>Botoes: "Preview" e "Usar Template"</li></ul><p><strong>Accoes (menu dropdown):</strong></p><ul><li>Preview Completo</li><li>Usar Template (navega para <code>project-builder</code>)</li><li>Exportar Template (alerta com formatos: JSON, Jira XML, Azure DevOps, Excel)</li></ul><h3 id="7-6-templates-mock-8-templates">7.6 Templates Mock (8 templates)</h3><table><thead><tr><th>Template</th><th>Categoria</th><th>Stats</th><th>Rating</th></tr></thead><tbody><tr><td>Mobile Banking Particulares PT</td><td>Mobile Banking</td><td>8EP, 22FT, 87US</td><td>4.9</td></tr><tr><td>MB Way - Sistema Completo</td><td>Pagamentos</td><td>5EP, 12FT, 45US</td><td>5.0</td></tr><tr><td>Homebanking Web Empresas</td><td>Web Banking</td><td>10EP, 28FT, 102US</td><td>4.7</td></tr><tr><td>API Open Banking PSD2</td><td>APIs / Open Banking</td><td>4EP, 11FT, 38US</td><td>4.8</td></tr><tr><td>Onboarding Digital Completo</td><td>Onboarding</td><td>6EP, 15FT, 52US</td><td>4.6</td></tr><tr><td>Cartoes - Gestao e Operacoes</td><td>Cartoes</td><td>7EP, 18FT, 64US</td><td>4.9</td></tr><tr><td>Backoffice Operacoes Bancarias</td><td>Backoffice</td><td>9EP, 24FT, 89US</td><td>4.5</td></tr><tr><td>Multibanco ATM - Terminal</td><td>Core Banking</td><td>5EP, 13FT, 41US</td><td>5.0</td></tr></tbody></table><p>---</p><h2 id="8-ecra-biblioteca-reutilizavel">8. Ecra: Biblioteca Reutilizavel</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/library.tsx</code> <strong>Rota interna:</strong> <code>library</code> <strong>Agentes envolvidos:</strong> Context Ingestor Agent, Requirements Generator Agent (importacao automatica)</p><h3 id="8-1-proposito">8.1 Proposito</h3><p>Repositorio central de componentes bancarios reutilizaveis - personas, regras de negocio, acceptance criteria e test cases validados - que podem ser importados automaticamente pelo IA Assistant ao criar novos projectos.</p><h3 id="8-2-card-explicativo">8.2 Card Explicativo</h3><p>Card azul no topo com explicacao do que e a Biblioteca e como funciona:</p><ul><li>Acelera Criacao (reutilizacao de componentes validados)</li><li>Garante Compliance (regras pre-aprovadas)</li><li>Padroniza Qualidade (mesmos criterios entre projectos)</li><li>Melhora Continuamente (versionamento)</li></ul><p>Fluxo descrito: (1) IA sugere componentes -&gt; (2) Utilizador aceita/adapta -&gt; (3) Estrutura final inclui componentes validados</p><h3 id="8-3-kpis-grid-4-colunas">8.3 KPIs (Grid 4 colunas)</h3><table><thead><tr><th>Metrica</th><th>Contagem</th></tr></thead><tbody><tr><td>Personas</td><td>10</td></tr><tr><td>Regras de Negocio</td><td>12</td></tr><tr><td>Acceptance Criteria</td><td>3</td></tr><tr><td>Test Cases Base</td><td>3</td></tr></tbody></table><h3 id="8-4-tab-personas">8.4 Tab: Personas</h3><p><strong>Dialogo de Adicao:</strong> <code>AddPersonaDialog</code> (componente separado)</p><p>Cada Persona inclui:</p><ul><li>Nome + Badge "Usado em N projectos"</li><li>Descricao</li><li>Objectivos (lista)</li><li>Pain Points (lista)</li><li>Perfil Tecnico</li><li>Frequencia de Uso</li><li>Tags</li></ul><p><strong>Personas Mock (10):</strong></p><table><thead><tr><th>Persona</th><th>Tags</th><th>Usado Em</th></tr></thead><tbody><tr><td>Cliente Particular Digital</td><td>Mobile, Digital-First, Retail</td><td>12</td></tr><tr><td>Cliente Empresarial PME</td><td>Corporate, Multi-user</td><td>8</td></tr><tr><td>Backoffice Operator</td><td>Internal, Operations</td><td>5</td></tr><tr><td>Cliente Senior</td><td>Accessibility, Senior</td><td>3</td></tr><tr><td>Cliente Premium Private Banking</td><td>Premium, Wealth</td><td>6</td></tr><tr><td>Developer Third-Party Provider</td><td>Developer, API</td><td>4</td></tr><tr><td>Compliance Officer</td><td>Compliance, Audit</td><td>7</td></tr><tr><td>Cliente Jovem Universitario</td><td>Youth, Student, Mobile</td><td>5</td></tr><tr><td>Tesoureiro Corporate</td><td>Treasury, Corporate</td><td>3</td></tr><tr><td>Branch Manager</td><td>Branch, Sales, Internal</td><td>4</td></tr></tbody></table><p><strong>Accoes por persona:</strong></p><ul><li>Ver Completo</li><li>Duplicar</li><li>Usar em Projecto</li></ul><h3 id="8-5-tab-regras-de-negocio">8.5 Tab: Regras de Negocio</h3><p><strong>Dialogo de Adicao:</strong> <code>AddBusinessRuleDialog</code></p><p>Cada regra inclui:</p><ul><li>Categoria + Nome + Badge de uso</li><li>Regra (texto)</li><li>Validacao (codigo/pseudo-codigo)</li><li>Excepcoes (texto)</li><li>Tags de compliance</li></ul><p><strong>Regras Mock (12):</strong> Cobrem Transferencias, Autenticacao, Cartoes, Onboarding, Compliance, Pagamentos, Credito, AML, Privacidade, Investimentos, API.</p><p><strong>Accoes por regra:</strong></p><ul><li>Copiar Regra</li><li>Adicionar a Feature</li></ul><h3 id="8-6-tab-acceptance-criteria">8.6 Tab: Acceptance Criteria</h3><p><strong>Dialogo de Adicao:</strong> <code>AddAcceptanceCriteriaDialog</code></p><p>Cada set inclui:</p><ul><li>Categoria + Feature + Badge de uso</li><li>Lista de criterios com checkmarks</li></ul><p><strong>Sets Mock (3):</strong> Login Biometrico, Transferencia SEPA, Pagamento MB Way Comerciante</p><p><strong>Accoes por set:</strong></p><ul><li>Copiar Criterios</li><li>Adicionar a US</li></ul><h3 id="8-7-tab-test-cases-base">8.7 Tab: Test Cases Base</h3><p><strong>Dialogo de Adicao:</strong> <code>AddTestCaseDialog</code></p><p>Cada test case inclui:</p><ul><li>Tipo (Security, Compliance, Performance)</li><li>Prioridade (Critical, High, Medium)</li><li>Nome</li><li>Passos (lista numerada)</li><li>Resultado Esperado</li></ul><p><strong>Test Cases Mock (3):</strong> Anti-spoofing biometrico, Conformidade PSD2, Teste de carga 1000 utilizadores</p><p><strong>Accoes por test case:</strong></p><ul><li>Copiar Test Case</li><li>Adicionar a US</li></ul><p>---</p><h2 id="9-ecra-integracoes">9. Ecra: Integracoes</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/integrations.tsx</code> <strong>Rota interna:</strong> <code>integrations</code> <strong>Agentes envolvidos:</strong> Export Agent</p><h3 id="9-1-proposito">9.1 Proposito</h3><p>Gestao de conectores com plataformas de gestao de projectos (Jira Cloud, Azure DevOps, Jira Data Center). Configuracao de tokens, monitorizacao de sincronizacoes e estatisticas de exportacao.</p><h3 id="9-2-kpis-grid-3-colunas">9.2 KPIs (Grid 3 colunas)</h3><table><thead><tr><th>Metrica</th><th>Valor</th></tr></thead><tbody><tr><td>Integracoes Activas</td><td>2</td></tr><tr><td>Projectos Sincronizados</td><td>20</td></tr><tr><td>Exportacoes (Total)</td><td>79</td></tr></tbody></table><h3 id="9-3-card-de-integracao-por-plataforma">9.3 Card de Integracao (por plataforma)</h3><p><strong>Estado: Conectado</strong></p><p>Informacao exibida:</p><ul><li>Nome + Badge de estado (Conectado/Desconectado)</li><li>Descricao</li><li>Projectos sincronizados (contagem)</li><li>Ultima sincronizacao (relativo + absoluto)</li><li>Frequencia de sincronizacao</li><li>Estatisticas: Total exportacoes, Ultima semana, Tempo medio</li><li>Funcionalidades disponiveis (lista com checks)</li><li>URL da instancia</li><li>Versao da API</li><li>Estado do token</li></ul><p><strong>Accoes (conectado):</strong></p><ul><li>Configurar</li><li>Sincronizar Agora</li><li>Desconectar</li></ul><p><strong>Estado: Desconectado</strong></p><ul><li>Funcionalidades disponiveis (lista sem check activo)</li><li>Card informativo azul: "Como conectar" com instrucoes sobre PAT</li></ul><p><strong>Accoes (desconectado):</strong></p><ul><li>Conectar</li></ul><h3 id="9-4-integracoes-mock">9.4 Integracoes Mock</h3><table><thead><tr><th>Plataforma</th><th>Estado</th><th>Projectos</th><th>Exportacoes</th><th>Tempo Medio</th></tr></thead><tbody><tr><td>Jira Cloud</td><td>Conectado</td><td>12</td><td>47</td><td>12s</td></tr><tr><td>Azure DevOps</td><td>Conectado</td><td>8</td><td>32</td><td>15s</td></tr><tr><td>Jira Data Center</td><td>Desconectado</td><td>0</td><td>-</td><td>-</td></tr></tbody></table><h3 id="9-5-card-de-ajuda">9.5 Card de Ajuda</h3><p>Card no rodape com link para documentacao tecnica sobre configuracao de tokens, permissoes e troubleshooting.</p><p>---</p><h2 id="10-ecra-auditoria-logs">10. Ecra: Auditoria &amp; Logs</h2><p><strong>Ficheiro:</strong> <code>src/app/components/pages/audit.tsx</code> <strong>Rota interna:</strong> <code>audit</code> <strong>Agentes envolvidos:</strong> Audit &amp; Logging Agent</p><h3 id="10-1-proposito">10.1 Proposito</h3><p>Rastreabilidade completa de todas as accoes executadas na plataforma. Retencao de 10 anos conforme requisitos do Banco de Portugal. Interface para pesquisa, filtragem e exportacao de logs.</p><h3 id="10-2-kpis-grid-4-colunas">10.2 KPIs (Grid 4 colunas)</h3><table><thead><tr><th>Metrica</th><th>Valor</th></tr></thead><tbody><tr><td>Total de Accoes</td><td>Contagem total de logs</td></tr><tr><td>Accoes Hoje</td><td>Filtro por data actual</td></tr><tr><td>Utilizadores Activos</td><td>Contagem de utilizadores unicos</td></tr><tr><td>Taxa de Sucesso</td><td>Percentagem de status=success</td></tr></tbody></table><h3 id="10-3-tabela-de-historico-de-accoes">10.3 Tabela de Historico de Accoes</h3><p><strong>Filtros disponiveis:</strong></p><ul><li>Pesquisa (texto livre: accoes, utilizadores, projectos, detalhes)</li><li>Tipo de Accao (select: Exportacoes, Criacoes, Edicoes, Templates, Integracoes, IA Assistant, Compliance, Biblioteca)</li><li>Utilizador (select: dinamico)</li><li>Botao "Limpar" (visivel quando filtros activos)</li></ul><p><strong>Colunas da tabela:</strong></p><table><thead><tr><th>Coluna</th><th>Conteudo</th></tr></thead><tbody><tr><td>Accao</td><td>Icone colorido por tipo + nome da accao</td></tr><tr><td>Utilizador</td><td>Avatar (iniciais) + nome</td></tr><tr><td>Projecto</td><td>Codigo badge + nome (ou "-" se global)</td></tr><tr><td>Data/Hora</td><td>Timestamp formatado PT-PT</td></tr><tr><td>Detalhes</td><td>Descricao textual da accao</td></tr><tr><td>Duracao</td><td>Badge mono (ex: "12s")</td></tr><tr><td>Status</td><td>Badge "Sucesso" (verde) ou "Erro" (vermelho)</td></tr></tbody></table><p><strong>Tipos de Accao e Cores:</strong></p><table><thead><tr><th>Tipo</th><th>Cor</th><th>Icone</th></tr></thead><tbody><tr><td>export</td><td>Azul</td><td>Upload</td></tr><tr><td>create</td><td>Verde</td><td>Plus</td></tr><tr><td>edit</td><td>Roxo</td><td>FileText</td></tr><tr><td>template</td><td>Laranja</td><td>FileSearch</td></tr><tr><td>integration</td><td>Cinza</td><td>Settings</td></tr><tr><td>ai</td><td>Indigo</td><td>Activity</td></tr><tr><td>compliance</td><td>Verde</td><td>Shield</td></tr><tr><td>library</td><td>Amarelo</td><td>FileText</td></tr></tbody></table><p><strong>Accao global:</strong> Exportar CSV</p><p><strong>Rodape da tabela:</strong> Contagem de registos + indicadores de compliance (Retencao 10 anos, Encriptacao AES-256, Compliance Banco de Portugal)</p><h3 id="10-4-card-de-compliance">10.4 Card de Compliance</h3><p>Card verde no rodape com garantias:</p><ul><li>Logs imutaveis (append-only)</li><li>Encriptacao AES-256</li><li>Retencao 10 anos</li><li>Rastreabilidade IP</li><li>Conformidade GDPR</li></ul><h3 id="10-5-logs-mock-10-entradas">10.5 Logs Mock (10 entradas)</h3><p>Cobrem todos os tipos de accao com timestamps, IPs internos, duracoes e estados variados (sucesso + 1 erro).</p><p>---</p><h2 id="11-componentes-de-dialogo">11. Componentes de Dialogo</h2><h3 id="11-1-addpersonadialog">11.1 AddPersonaDialog</h3><p><strong>Ficheiro:</strong> <code>src/app/components/add-persona-dialog.tsx</code></p><p>Formulario para adicionar nova persona a biblioteca. Campos: nome, descricao, objectivos, pain points, perfil tecnico, frequencia de uso, tags.</p><h3 id="11-2-addbusinessruledialog">11.2 AddBusinessRuleDialog</h3><p><strong>Ficheiro:</strong> <code>src/app/components/add-business-rule-dialog.tsx</code></p><p>Formulario para adicionar nova regra de negocio. Campos: categoria, nome, regra, validacao, excepcoes, compliance tags.</p><h3 id="11-3-addacceptancecriteriadialog">11.3 AddAcceptanceCriteriaDialog</h3><p><strong>Ficheiro:</strong> <code>src/app/components/add-acceptance-criteria-dialog.tsx</code></p><p>Formulario para adicionar novo set de acceptance criteria. Campos: categoria, feature, lista de criterios.</p><h3 id="11-4-addtestcasedialog">11.4 AddTestCaseDialog</h3><p><strong>Ficheiro:</strong> <code>src/app/components/add-test-case-dialog.tsx</code></p><p>Formulario para adicionar novo test case base. Campos: categoria, nome, tipo, prioridade, passos, resultado esperado.</p><p>---</p><h2 id="12-fluxos-de-utilizador-completos">12. Fluxos de Utilizador Completos</h2><h3 id="12-1-fluxo-criar-novo-projecto-end-to-end">12.1 Fluxo: Criar Novo Projecto (end-to-end)</h3><pre><code>Dashboard
  |
  +--[Click "Novo Projecto" na Topbar]
  |
  v
Novo Projeto (wizard)
  |-- Etapa 1: Identidade
  |-- Etapa 2: Contexto Bancario (com IA assist)
  |-- Etapa 3: Compliance &amp; Seguranca
  |-- Etapa 4: Sistemas &amp; Integracoes (com IA assist)
  |-- Etapa 5: Input Documental (com IA assist)
  |-- Etapa 6: Configuracao IA
  |
  +--[Click "Iniciar IA Assistant"]
  |
  v
Project Builder (IA Assistant)
  |-- 6 categorias x N perguntas = 28 perguntas
  |-- Artefactos gerados em tempo real
  |-- Preview da estrutura
  |
  +--[Click "Finalizar e Exportar"]
  |
  v
Project View
  |-- Estrutura completa hierarquica
  |-- Exportar para Jira/Azure
  |-- Abrir na plataforma alvo</code></pre><h3 id="12-2-fluxo-usar-template">12.2 Fluxo: Usar Template</h3><pre><code>Templates
  |
  +--[Click "Usar Template"]
  |
  v
Project Builder
  |-- Template pre-carregado como contexto
  |-- IA Assistant adapta perguntas
  |
  v
[Segue fluxo normal de Project Builder]</code></pre><h3 id="12-3-fluxo-consultar-projecto-existente">12.3 Fluxo: Consultar Projecto Existente</h3><pre><code>Dashboard
  |
  +--[Click numa linha da tabela]
  |
  v
Project View
  |-- Navegar hierarquia
  |-- Expandir/colapsar niveis
  |-- Ver detalhes de cada artefacto</code></pre><h3 id="12-4-fluxo-configurar-integracao">12.4 Fluxo: Configurar Integracao</h3><pre><code>Integracoes
  |
  +--[Click "Conectar" em plataforma desconectada]
  |
  v
[Configuracao de PAT]
  |
  +--[Token validado]
  |
  v
Integracao activa
  |-- Sincronizar Agora
  |-- Ver estatisticas</code></pre><p>---</p><h2 id="13-mapeamento-ecra-a-agente">13. Mapeamento Ecra-a-Agente</h2><table><thead><tr><th>Ecra</th><th>Accao do Utilizador</th><th>Agente Acionado</th></tr></thead><tbody><tr><td>Novo Projecto</td><td>Preencher formulario</td><td>Context Ingestor Agent</td></tr><tr><td>Novo Projecto</td><td>"Melhorar com IA"</td><td>Context Ingestor Agent (sub-task)</td></tr><tr><td>Project Builder</td><td>Responder pergunta</td><td>Questionnaire / Discovery Agent</td></tr><tr><td>Project Builder</td><td>(Automatico) Gerar artefactos</td><td>Requirements Generator Agent</td></tr><tr><td>Project Builder</td><td>(Automatico) Gerar AC</td><td>Acceptance Criteria Agent</td></tr><tr><td>Project Builder</td><td>(Automatico) Gerar Test Cases</td><td>Test Design Agent</td></tr><tr><td>Project Builder</td><td>(Automatico) Validar qualidade</td><td>Quality Gate / Linter Agent</td></tr><tr><td>Project View</td><td>Exportar</td><td>Export Agent</td></tr><tr><td>Project View</td><td>Ver historico de versoes</td><td>Versioning &amp; Diff Agent</td></tr><tr><td>Dashboard</td><td>Exportar novamente</td><td>Export Agent</td></tr><tr><td>Integracoes</td><td>Sincronizar</td><td>Export Agent</td></tr><tr><td>Auditoria</td><td>Qualquer accao na plataforma</td><td>Audit &amp; Logging Agent (transversal)</td></tr><tr><td>Biblioteca</td><td>Importar componente em projecto</td><td>Context Ingestor Agent</td></tr></tbody></table><p>---</p><h2 id="14-estado-actual-vs-implementacao-necessaria">14. Estado Actual vs Implementacao Necessaria</h2><h3 id="14-1-o-que-existe-frontend-ui-figma">14.1 O que existe (Frontend - UI/Figma)</h3><ul><li>Todos os 8 ecras implementados com UI completa</li><li>Componentes shadcn/ui + Radix UI</li><li>Layout responsivo com Tailwind CSS</li><li>Dados mock realistas para demonstracao</li><li>Navegacao entre ecras via useState</li><li>Dialogos de adicao para Biblioteca</li></ul><h3 id="14-2-o-que-falta-backend-logica-agentes">14.2 O que falta (Backend / Logica / Agentes)</h3><table><thead><tr><th>Componente</th><th>Estado</th><th>Notas</th></tr></thead><tbody><tr><td>API Backend (REST/GraphQL)</td><td>Inexistente</td><td>Necessario para persistencia</td></tr><tr><td>Base de Dados</td><td>Inexistente</td><td>Schema por definir</td></tr><tr><td>Autenticacao / AuthN+AuthZ</td><td>Inexistente</td><td>OAuth2 / SSO corporativo</td></tr><tr><td>Router (React Router)</td><td>Inexistente</td><td>Usa useState em vez de rotas URL</td></tr><tr><td>Agentes de IA</td><td>Mock only</td><td>Respostas simuladas com setTimeout</td></tr><tr><td>Integracao Jira Cloud</td><td>Mock only</td><td>API REST v3 por implementar</td></tr><tr><td>Integracao Azure DevOps</td><td>Mock only</td><td>API REST 7.0 por implementar</td></tr><tr><td>Upload de ficheiros</td><td>Mock only</td><td>Drag &amp; drop UI existe, logica nao</td></tr><tr><td>Pesquisa global</td><td>Mock only</td><td>Input existe, logica nao</td></tr><tr><td>Paginacao</td><td>Mock only</td><td>UI existe, logica nao</td></tr><tr><td>Versionamento de projectos</td><td>Inexistente</td><td>Por implementar</td></tr><tr><td>Testes automatizados</td><td>Inexistente</td><td>Nenhum framework de testes configurado</td></tr><tr><td>CI/CD</td><td>Inexistente</td><td>Pipeline por definir</td></tr></tbody></table><p>---</p><h2 id="15-regras-de-compliance-incorporadas">15. Regras de Compliance Incorporadas</h2><table><thead><tr><th>Regulamento</th><th>Como se manifesta na plataforma</th></tr></thead><tbody><tr><td>PSD2</td><td>Etapa 3 do wizard, tags automaticos, test cases compliance</td></tr><tr><td>SCA</td><td>Regras de negocio, test cases de seguranca</td></tr><tr><td>GDPR</td><td>Consentimento, retencao de dados, anonimizacao</td></tr><tr><td>Banco de Portugal</td><td>Logs 10 anos, audit trail, reports regulamentares</td></tr><tr><td>SIBS</td><td>Integracoes, regras MB Way, validacao IBAN</td></tr><tr><td>AML / KYC</td><td>Onboarding digital, monitorizacao de transaccoes</td></tr><tr><td>EMV</td><td>Cartoes, terminais ATM</td></tr><tr><td>PCI-DSS</td><td>Seguranca de cartoes, tokenizacao</td></tr><tr><td>MiFID II</td><td>Adequacao de produtos de investimento</td></tr></tbody></table><p>---</p><h2 id="16-manual-operacional-por-ecra">16. Manual Operacional por Ecra</h2><p>Esta secao funciona como manual de utilizacao funcional da plataforma.   Objetivo: permitir que equipas de Produto, BA, Delivery e Governance saibam <strong>o que fazer em cada ecra</strong>, em que ordem e com que resultado esperado.</p><h3 id="16-1-dashboard">16.1 Dashboard</h3><p><figure class="shot"><img src="screenshots/dashboard.png" alt="Dashboard" /><figcaption>Dashboard</figcaption></figure></p><p><strong>Quando usar:</strong> Inicio de sessao e acompanhamento de estado global.</p><p><strong>Passos operacionais:</strong></p><ol><li>Rever KPIs principais para validar volume, qualidade e compliance.</li><li>Aplicar filtros (tipo, plataforma, departamento) para localizar projeto alvo.</li><li>Selecionar projeto na tabela para abrir estrutura detalhada.</li><li>Usar menu de acoes para exportar novamente, duplicar ou abrir em plataforma externa.</li></ol><p><strong>Resultado esperado:</strong> identificacao rapida do estado dos projetos e acesso ao projeto correto para revisao/export.</p><h3 id="16-2-novo-projeto">16.2 Novo Projeto</h3><p><figure class="shot"><img src="screenshots/new-project.png" alt="Novo Projeto" /><figcaption>Novo Projeto</figcaption></figure></p><p><strong>Quando usar:</strong> Criacao de novo projeto antes da sessao de IA.</p><p><strong>Passos operacionais:</strong></p><ol><li>Preencher 6 etapas do wizard (identidade, contexto, compliance, integracoes, documentos, configuracao IA).</li><li>Validar que requisitos regulatorios aplicaveis estao selecionados.</li><li>Concluir em <code>Iniciar IA Assistant</code>.</li></ol><p><strong>Resultado esperado:</strong> contexto completo e estruturado, pronto para discovery e geracao automatica de artefactos.</p><h3 id="16-3-project-builder">16.3 Project Builder</h3><p><figure class="shot"><img src="screenshots/project-builder.png" alt="Project Builder" /><figcaption>Project Builder</figcaption></figure></p><p><strong>Quando usar:</strong> Discovery guiada e geracao de artefactos.</p><p><strong>Passos operacionais:</strong></p><ol><li>Responder perguntas por categoria, seguindo ordem apresentada.</li><li>Verificar artefactos gerados no painel direito.</li><li>Rever alertas de qualidade/compliance durante a sessao.</li><li>Abrir <code>Preview</code> e validar estrutura antes de finalizar.</li><li>Concluir em <code>Finalizar e Exportar</code>.</li></ol><p><strong>Resultado esperado:</strong> Epics, Features, User Stories, Tasks e Test Cases gerados com rastreabilidade.</p><h3 id="16-4-project-view">16.4 Project View</h3><p><figure class="shot"><img src="screenshots/project-view.png" alt="Project View" /><figcaption>Project View</figcaption></figure></p><p><strong>Quando usar:</strong> Revisao final de estrutura e exportacao.</p><p><strong>Passos operacionais:</strong></p><ol><li>Navegar hierarquia completa (Epic &gt; Feature &gt; User Story &gt; Tasks/Test Cases).</li><li>Validar prioridades, criterios e cobertura por nivel.</li><li>Consultar tabs de visao geral/compliance/historico.</li><li>Executar exportacao para Jira/Azure.</li></ol><p><strong>Resultado esperado:</strong> estrutura validada e publicada na plataforma destino.</p><h3 id="16-5-templates">16.5 Templates</h3><p><figure class="shot"><img src="screenshots/templates.png" alt="Templates" /><figcaption>Templates</figcaption></figure></p><p><strong>Quando usar:</strong> Arranque rapido com estrutura pre-definida.</p><p><strong>Passos operacionais:</strong></p><ol><li>Filtrar por categoria/uso/rating.</li><li>Abrir preview do template para verificar adequacao.</li><li>Aplicar em <code>Usar Template</code> para iniciar fluxo no Project Builder.</li></ol><p><strong>Resultado esperado:</strong> aceleracao de arranque mantendo padrao funcional e compliance.</p><h3 id="16-6-biblioteca">16.6 Biblioteca</h3><p><figure class="shot"><img src="screenshots/library.png" alt="Biblioteca" /><figcaption>Biblioteca</figcaption></figure></p><p><strong>Quando usar:</strong> Reutilizacao de conhecimento validado.</p><p><strong>Passos operacionais:</strong></p><ol><li>Consultar tabs de Personas, Regras de Negocio, Acceptance Criteria e Test Cases base.</li><li>Copiar/reutilizar componentes em novos projetos.</li><li>Adicionar novos componentes quando houver validacao interna.</li></ol><p><strong>Resultado esperado:</strong> consistencia transversal entre projetos e reducao de retrabalho.</p><h3 id="16-7-integracoes">16.7 Integracoes</h3><p><figure class="shot"><img src="screenshots/integrations.png" alt="Integracoes" /><figcaption>Integracoes</figcaption></figure></p><p><strong>Quando usar:</strong> Configurar e monitorizar conectores externos.</p><p><strong>Passos operacionais:</strong></p><ol><li>Confirmar estado de conexao por plataforma.</li><li>Configurar token/PAT onde necessario.</li><li>Executar <code>Sincronizar Agora</code> para validar conectividade.</li><li>Rever metricas de exportacao e tempo medio.</li></ol><p><strong>Resultado esperado:</strong> integracoes operacionais com capacidade de exportacao idempotente.</p><h3 id="16-8-auditoria-logs">16.8 Auditoria &amp; Logs</h3><p><figure class="shot"><img src="screenshots/audit.png" alt="Auditoria" /><figcaption>Auditoria</figcaption></figure></p><p><strong>Quando usar:</strong> Rastreabilidade, auditoria e analise de incidentes.</p><p><strong>Passos operacionais:</strong></p><ol><li>Filtrar por acao, utilizador, projeto e periodo.</li><li>Investigar entradas com status de erro/warning.</li><li>Exportar registos quando necessario para analise externa/compliance.</li></ol><p><strong>Resultado esperado:</strong> trilha auditavel completa e suporte a requisitos regulatorios.</p><p>---</p><h2 id="anexo-a-stack-tecnologica">Anexo A: Stack Tecnologica</h2><table><thead><tr><th>Camada</th><th>Tecnologia</th></tr></thead><tbody><tr><td>Framework</td><td>React 18.3.1 + TypeScript</td></tr><tr><td>Build</td><td>Vite 6.3.5</td></tr><tr><td>Styling</td><td>Tailwind CSS 4.1.12</td></tr><tr><td>UI Library</td><td>shadcn/ui + Radix UI</td></tr><tr><td>Icons</td><td>Lucide React 0.487.0</td></tr><tr><td>Forms</td><td>React Hook Form 7.55.0</td></tr><tr><td>Animation</td><td>Motion 12.23.24</td></tr><tr><td>DnD</td><td>React DnD 16.0.1</td></tr><tr><td>Charts</td><td>Recharts 2.15.2</td></tr><tr><td>Date</td><td>Date-fns 3.6.0</td></tr></tbody></table><h2 id="anexo-b-referencia-de-ficheiros">Anexo B: Referencia de Ficheiros</h2><table><thead><tr><th>Ficheiro</th><th>Responsabilidade</th></tr></thead><tbody><tr><td><code>src/app/App.tsx</code></td><td>Router principal, gestao de estado</td></tr><tr><td><code>src/app/components/layout/sidebar.tsx</code></td><td>Navegacao lateral</td></tr><tr><td><code>src/app/components/layout/topbar.tsx</code></td><td>Barra superior, notificacoes</td></tr><tr><td><code>src/app/components/pages/dashboard.tsx</code></td><td>Dashboard principal</td></tr><tr><td><code>src/app/components/pages/new-project.tsx</code></td><td>Wizard de novo projecto</td></tr><tr><td><code>src/app/components/pages/project-builder.tsx</code></td><td>IA Assistant (questionario)</td></tr><tr><td><code>src/app/components/pages/project-view.tsx</code></td><td>Visualizacao de projecto</td></tr><tr><td><code>src/app/components/pages/templates.tsx</code></td><td>Catalogo de templates</td></tr><tr><td><code>src/app/components/pages/library.tsx</code></td><td>Biblioteca reutilizavel</td></tr><tr><td><code>src/app/components/pages/integrations.tsx</code></td><td>Gestao de integracoes</td></tr><tr><td><code>src/app/components/pages/audit.tsx</code></td><td>Auditoria e logs</td></tr></tbody></table><p>---</p><h2 id="anexo-c-prompt-pack-foundry-9-agentes">Anexo C: Prompt Pack Foundry (9 Agentes)</h2><p>Este anexo define os prompts base recomendados para configuracao dos agentes no Foundry.   Todos os prompts assumem que o Figma e a fonte de verdade para UI e nomenclatura.</p><h3 id="c-1-context-ingestor-agent">C.1 Context Ingestor Agent</h3><p><strong>Objetivo:</strong> Normalizar inputs do projeto e produzir contexto estruturado para os agentes seguintes.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Context Ingestor Agent for StoryForge.
Rules:
1) Figma is the absolute source of truth for UI and naming. Never propose UI changes.
2) Normalize all project inputs into structured context.
3) Detect domain, compliance scope, missing critical information, and risk level.
4) Keep provider-agnostic outputs, no vendor lock-in assumptions.
Output format:
- summary
- detectedDomain
- suggestedCompliance[]
- suggestedPersonas[]
- suggestedBusinessRules[]
- riskLevel (low|medium|high)
Language: PT-PT for business content.</code></pre><h3 id="c-2-questionnaire-discovery-agent">C.2 Questionnaire / Discovery Agent</h3><p><strong>Objetivo:</strong> Conduzir discovery estruturada e fechar lacunas.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Questionnaire/Discovery Agent for StoryForge.
Rules:
1) Ask one focused question at a time.
2) Prioritize missing information that impacts requirements quality or compliance.
3) Keep questions objective, enterprise-oriented, and banking-aware.
4) Do not invent UI or rename entities defined in Figma.
Output format:
- nextQuestion
- rationale
- category
- expectedImpact
Language: PT-PT.</code></pre><h3 id="c-3-requirements-generator-agent">C.3 Requirements Generator Agent</h3><p><strong>Objetivo:</strong> Gerar Epics, Features e User Stories de forma rastreavel.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Requirements Generator Agent for StoryForge.
Rules:
1) Generate Epics, Features, User Stories based only on validated context.
2) Maintain traceability from input evidence to each artifact.
3) Apply Portuguese banking context and required regulations (PSD2, SCA, GDPR where relevant).
4) Do not add sprint planning or execution management content.
Output format:
- epics[]
- features[]
- userStories[]
- traceabilityMap[]
- qualityScore
Language: PT-PT for functional text; English only for technical identifiers.</code></pre><h3 id="c-4-acceptance-criteria-agent">C.4 Acceptance Criteria Agent</h3><p><strong>Objetivo:</strong> Produzir criterios Given/When/Then completos.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Acceptance Criteria Agent for StoryForge.
Rules:
1) Generate acceptance criteria in Given/When/Then.
2) Cover happy path, validation failures, and negative scenarios.
3) Include compliance-sensitive behaviors where applicable.
4) Keep criteria testable and unambiguous.
Output format:
- artifactId
- acceptanceCriteria[] (GWT)
- coverageNotes
Language: PT-PT.</code></pre><h3 id="c-5-test-design-agent">C.5 Test Design Agent</h3><p><strong>Objetivo:</strong> Gerar test cases funcionais e nao-funcionais.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Test Design Agent for StoryForge.
Rules:
1) Generate complete test cases with preconditions, steps, expected result, and test data.
2) Classify each test case type (functional, security, performance, accessibility, compliance).
3) Prioritize tests by business and regulatory risk.
4) Ensure each test maps to one or more acceptance criteria.
Output format:
- testCases[]
- coverageByArtifact
- uncoveredRisks[]
Language: PT-PT.</code></pre><h3 id="c-6-quality-gate-linter-agent">C.6 Quality Gate / Linter Agent</h3><p><strong>Objetivo:</strong> Validar completude, consistencia e compliance antes de exportar.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Quality Gate/Linter Agent for StoryForge.
Rules:
1) Validate completeness, consistency, traceability, and compliance.
2) Block export when critical errors exist.
3) Return clear remediation actions by severity.
4) Never change UI definitions from Figma.
Output format:
- overallScore
- categories {completeness, consistency, compliance, traceability}
- issues[] {severity, artifact, message, suggestion}
- exportDecision (allow|block)
Language: PT-PT.</code></pre><h3 id="c-7-versioning-diff-agent">C.7 Versioning &amp; Diff Agent</h3><p><strong>Objetivo:</strong> Gerir versoes e diffs funcionais.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Versioning &amp; Diff Agent for StoryForge.
Rules:
1) Compare previous and current artifact structures.
2) Classify change type: major, minor, patch.
3) Generate concise changelog focused on functional impact.
4) Preserve historical traceability of requirement evolution.
Output format:
- previousVersion
- nextVersion
- changeType
- changelog[]
- impactSummary
Language: PT-PT.</code></pre><h3 id="c-8-export-agent">C.8 Export Agent</h3><p><strong>Objetivo:</strong> Mapear artefactos internos para Jira/Azure com idempotencia.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Export Agent for StoryForge.
Rules:
1) Map internal artifacts to target platform fields (Jira/Azure).
2) Ensure idempotent export (safe retries, no duplicates).
3) Preserve links and hierarchy (Epic &gt; Feature &gt; Story &gt; Task/Test).
4) Report failures with actionable diagnostics.
Output format:
- platform
- itemsExported
- itemsFailed
- details[] {id, externalId, status}
- url
Language: PT-PT for messages; technical keys in English.</code></pre><h3 id="c-9-audit-logging-agent">C.9 Audit &amp; Logging Agent</h3><p><strong>Objetivo:</strong> Garantir trilha auditavel para todas as accoes.</p><p><strong>Prompt base (system):</strong></p><pre><code>You are the Audit &amp; Logging Agent for StoryForge.
Rules:
1) Register all critical actions with immutable audit semantics.
2) Include actor, timestamp, action type, project scope, and status.
3) Produce logs suitable for banking audit and regulatory inspection.
4) Never omit failed actions.
Output format:
- eventId
- actionType
- timestamp
- actor
- project
- status
- details
Language: PT-PT.</code></pre><p>---</p><h2 id="anexo-d-screenshots-dos-ecras-estado-atual">Anexo D: Screenshots dos Ecras (Estado Atual)</h2><p>Objetivo: facilitar leitura funcional e alinhamento entre equipas tecnica, produto e governance.</p><h3 id="d-1-dashboard">D.1 Dashboard</h3><p><figure class="shot"><img src="screenshots/dashboard.png" alt="Dashboard" /><figcaption>Dashboard</figcaption></figure></p><h3 id="d-2-novo-projeto">D.2 Novo Projeto</h3><p><figure class="shot"><img src="screenshots/new-project.png" alt="Novo Projeto" /><figcaption>Novo Projeto</figcaption></figure></p><h3 id="d-3-project-builder">D.3 Project Builder</h3><p><figure class="shot"><img src="screenshots/project-builder.png" alt="Project Builder" /><figcaption>Project Builder</figcaption></figure></p><h3 id="d-4-project-view">D.4 Project View</h3><p><figure class="shot"><img src="screenshots/project-view.png" alt="Project View" /><figcaption>Project View</figcaption></figure></p><h3 id="d-5-templates">D.5 Templates</h3><p><figure class="shot"><img src="screenshots/templates.png" alt="Templates" /><figcaption>Templates</figcaption></figure></p><h3 id="d-6-biblioteca">D.6 Biblioteca</h3><p><figure class="shot"><img src="screenshots/library.png" alt="Biblioteca" /><figcaption>Biblioteca</figcaption></figure></p><h3 id="d-7-integracoes">D.7 Integracoes</h3><p><figure class="shot"><img src="screenshots/integrations.png" alt="Integracoes" /><figcaption>Integracoes</figcaption></figure></p><h3 id="d-8-auditoria-logs">D.8 Auditoria &amp; Logs</h3><p><figure class="shot"><img src="screenshots/audit.png" alt="Auditoria" /><figcaption>Auditoria</figcaption></figure></p><p>---</p><h2 id="17-estado-runtime-dos-agentes-implementado-em-2026-02-10">17. Estado Runtime dos Agentes (Implementado em 2026-02-10)</h2><h3 id="17-1-integracoes-ativas-no-frontend">17.1 Integracoes ativas no frontend</h3><ul><li><strong>Context Ingestor Agent:</strong> executado no passo final de <code>Novo Projeto</code> antes de abrir o IA Assistant.</li><li><strong>Questionnaire / Discovery Agent:</strong> executado a cada resposta no <code>Project Builder</code> para gerar a proxima pergunta.</li><li><strong>Export Agent:</strong> executado em <code>Project View</code> (acao Exportar / Exportar Novamente) e em <code>Integracoes</code> (Sincronizar Agora).</li><li><strong>Versioning &amp; Diff Agent:</strong> executado no menu <code>Historico de Versoes</code> em <code>Project View</code>.</li><li><strong>Audit &amp; Logging Agent (aplicacao):</strong> eventos de sucesso/erro registados via contexto de auditoria em cada acao de agente.</li></ul><h3 id="17-2-comportamento-de-fallback-foundry-mock">17.2 Comportamento de fallback Foundry -&gt; Mock</h3><ul><li>Quando <code>VITE_AGENT_PROVIDER=foundry</code> e a ligacao falha, o sistema muda automaticamente para Mock.</li><li>Um popup informa o utilizador sobre a mudanca para fallback, mantendo continuidade operacional.</li></ul><h3 id="17-3-pontos-de-ligacao-para-foundry">17.3 Pontos de ligacao para Foundry</h3><ul><li><code>src/contexts/AgentContext.tsx</code> define selecao de provider, fallback e popup de erro.</li><li><code>src/services/FoundryAgentService.ts</code> encapsula chamadas HTTP ao endpoint Foundry.</li><li><code>src/types/agents.ts</code> define contratos vendor-agnostic para os 9 agentes.</li></ul><h2 id="18-configuracao-foundry-por-ids-de-agente">18. Configuracao Foundry por IDs de Agente</h2><p>Para usar IDs reais no runtime:</p><ol><li>Copiar <code>.env.example</code> para <code>.env</code>.</li><li>Definir <code>VITE_AGENT_PROVIDER=foundry</code>.</li><li>Se usar endpoint unico, manter <code>VITE_FOUNDRY_MODE=single-endpoint</code> e preencher <code>VITE_FOUNDRY_ENDPOINT</code>.</li><li>Se usar IDs por agente, definir <code>VITE_FOUNDRY_MODE=agent-id</code>, preencher <code>VITE_FOUNDRY_AGENT_URL_TEMPLATE</code> e os 9 IDs:</li></ol><p>   - <code>VITE_FOUNDRY_AGENT_CONTEXT_INGESTOR_ID</code>    - <code>VITE_FOUNDRY_AGENT_QUESTIONNAIRE_DISCOVERY_ID</code>    - <code>VITE_FOUNDRY_AGENT_REQUIREMENTS_GENERATOR_ID</code>    - <code>VITE_FOUNDRY_AGENT_ACCEPTANCE_CRITERIA_ID</code>    - <code>VITE_FOUNDRY_AGENT_TEST_DESIGN_ID</code>    - <code>VITE_FOUNDRY_AGENT_QUALITY_GATE_ID</code>    - <code>VITE_FOUNDRY_AGENT_VERSIONING_DIFF_ID</code>    - <code>VITE_FOUNDRY_AGENT_EXPORT_ID</code>    - <code>VITE_FOUNDRY_AGENT_AUDIT_LOGGING_ID</code></p><p>Nota de resiliencia:</p><ul><li>Se Foundry falhar em runtime, o sistema muda automaticamente para Mock e mostra popup de erro.</li></ul><h3 id="18-1-automacao-via-azure-cli-script-oficial-do-projeto">18.1 Automacao via Azure CLI (script oficial do projeto)</h3><p>Script disponibilizado:</p><ul><li><code>scripts/foundry-login.ps1</code></li></ul><p>Comando:</p><ul><li><code>npm run foundry:login</code></li></ul><p>O script executa:</p><ol><li>Verifica <code>az</code> instalado e sessao autenticada (<code>az login</code> quando necessario).</li><li>Obtem token Entra para <code>https://ai.azure.com</code>.</li><li>Lista agentes no endpoint de projeto.</li><li>Resolve automaticamente IDs dos 9 agentes por nome (quando possivel).</li><li>Gera <code>.env.local</code> com configuracao Foundry em modo <code>agent-id</code>.</li><li>Exporta dump tecnico em <code>docs/_export/foundry-agents-latest.json</code>.</li></ol><p>Nota:</p><ul><li>O token escrito em <code>VITE_FOUNDRY_API_KEY</code> e temporario. Deve ser renovado periodicamente com nova execucao do script.</li></ul><h2 id="19-prompt-master-por-agente-copy-paste-foundry">19. Prompt Master por Agente (Copy/Paste Foundry)</h2><p>Nota de uso:</p><ul><li>Cada bloco abaixo e para colar no campo de instrucoes do respetivo agente no Foundry.</li><li>Todos os prompts estao em PT-PT e com output JSON estrito.</li></ul><h3 id="19-1-prompt-global-base-usar-em-todos-os-agentes">19.1 Prompt Global Base (usar em TODOS os agentes)</h3><pre><code>Es parte do StoryForge, uma plataforma enterprise de geracao de requisitos para banca portuguesa.

Restricoes imutaveis:
- O Figma e a fonte de verdade absoluta para UI/UX.
- Nunca propor alteracoes visuais/UI sem pedido explicito.
- Nunca renomear ecras, campos, componentes ou fluxos definidos no Figma.
- Focar em arquitetura, qualidade de requisitos, compliance, rastreabilidade e exportacao.

Dominio:
- Banca portuguesa (retalho, empresas, backoffice, open banking).
- Regulamentos e standards a considerar quando aplicavel: PSD2, SCA, GDPR, AML/KYC, Banco de Portugal, SIBS, PCI-DSS, EMV, MiFID II.

Modelo operacional:
- Es um agente especializado numa arquitetura multi-agente.
- Respostas deterministicas, auditaveis e enterprise-grade.
- Preservar rastreabilidade entre input do utilizador -&gt; pressupostos -&gt; artefactos gerados -&gt; tags de compliance.

Requisitos de output:
- Devolver APENAS JSON valido (sem markdown e sem texto fora do JSON).
- Nao inventar afirmacoes legais; quando houver incerteza, devolver pressupostos explicitos.
- Incluir confidence (0-1), riscos e lacunas de informacao.
- Conteudo funcional em PT-PT.
- Ingles apenas para identificadores tecnicos, chaves, schema e campos de integracao.

Qualidade:
- Clareza, completude, consistencia, testabilidade e cobertura de compliance.
- Incluir happy paths, negative paths e edge cases quando aplicavel.
- Artefactos prontos para exportacao Jira/Azure DevOps.

Seguranca:
- Nunca devolver segredos.
- Nunca incluir dados pessoais reais; usar placeholders sinteticos.</code></pre><h3 id="19-2-context-ingestor-agent">19.2 Context Ingestor Agent</h3><pre><code>Es o Context Ingestor Agent do StoryForge.

MISSAO
Ingerir inputs brutos (formularios, notas, links, uploads/metadados) e produzir contexto normalizado para os restantes agentes.

REGRAS
- Linguagem funcional em PT-PT.
- Sem texto fora de JSON.
- Nao inventar dados: quando faltar informacao, declarar em missingInfo.
- Incluir confidence [0..1], assumptions, risks, traceability.

OUTPUT (JSON estrito)
{
  "summary": "string",
  "detectedDomain": "string",
  "projectScope": "string",
  "coreCapabilities": ["string"],
  "complianceCandidates": ["string"],
  "integrationCandidates": ["string"],
  "dataSensitivity": "public|internal|confidential|restricted",
  "riskLevel": "low|medium|high",
  "assumptions": ["string"],
  "missingInfo": ["string"],
  "risks": ["string"],
  "traceability": [{"source":"string","extracted":"string"}],
  "confidence": 0.0
}</code></pre><h3 id="19-3-questionnaire-discovery-agent">19.3 Questionnaire / Discovery Agent</h3><pre><code>Es o Questionnaire / Discovery Agent do StoryForge (BA senior).

MISSAO
Gerar a proxima melhor pergunta, uma de cada vez, com base no contexto atual e historico de respostas.

REGRAS
- Fazer apenas 1 pergunta por interacao.
- Priorizar lacunas de maior impacto.
- Usar linguagem de negocio PT-PT, contexto bancario.
- Evitar perguntas genericas quando ja existirem evidencias especificas.

OUTPUT (JSON estrito)
{
  "nextQuestion": "string",
  "questionCategory": "personas|journeys|business_rules|exceptions|compliance|testing|integrations|data",
  "whyThisQuestion": "string",
  "expectedAnswerFormat": "short_text|long_text|list|number|yes_no|selection",
  "impactIfMissing": "string",
  "followUpCandidates": ["string"],
  "updatedProgress": {
    "answered": 0,
    "total": 0,
    "percent": 0
  },
  "confidence": 0.0
}</code></pre><h3 id="19-4-requirements-generator-agent">19.4 Requirements Generator Agent</h3><pre><code>Es o Requirements Generator Agent do StoryForge.

MISSAO
Gerar Epics, Features, User Stories e Tasks de forma consistente, rastreavel e auditavel.

REGRAS
- User Stories no formato: "Como [persona], quero [objetivo], para [valor]".
- Incluir requisitos funcionais e nao funcionais quando aplicavel.
- Adicionar tags de compliance por artefacto quando relevante.
- Garantir rastreabilidade clara para os inputs.

OUTPUT (JSON estrito)
{
  "epics": [
    {
      "id": "EP-###",
      "title": "string",
      "description": "string",
      "businessValue": "string",
      "priority": "Critical|High|Medium|Low",
      "complianceTags": ["string"],
      "features": [
        {
          "id": "FT-###",
          "title": "string",
          "description": "string",
          "businessRules": ["string"],
          "priority": "Critical|High|Medium|Low",
          "userStories": [
            {
              "id": "US-###",
              "title": "string",
              "asA": "string",
              "iWant": "string",
              "soThat": "string",
              "priority": "Critical|High|Medium|Low",
              "storyPoints": 0,
              "labels": ["string"],
              "tasks": [
                {"id":"TSK-###","title":"string","description":"string","estimate":"string"}
              ]
            }
          ]
        }
      ]
    }
  ],
  "qualityScore": 0,
  "assumptions": ["string"],
  "missingInfo": ["string"],
  "risks": ["string"],
  "traceability": [{"artifactId":"string","sources":["string"]}],
  "confidence": 0.0
}</code></pre><h3 id="19-5-acceptance-criteria-agent">19.5 Acceptance Criteria Agent</h3><pre><code>Es o Acceptance Criteria Agent do StoryForge.

MISSAO
Enriquecer User Stories com criterios Given/When/Then robustos e testaveis.

REGRAS
- Cobrir happy path, negative path, edge cases e compliance.
- Criterios curtos, claros e verificaveis.
- Identificar gaps que impedem validacao completa.

OUTPUT (JSON estrito)
{
  "acceptanceCriteriaByStory": [
    {
      "userStoryId": "US-###",
      "criteria": [
        {
          "id": "AC-###",
          "type": "happy|negative|edge|compliance|security",
          "given": "string",
          "when": "string",
          "then": "string"
        }
      ],
      "coverageScore": 0
    }
  ],
  "gaps": ["string"],
  "risks": ["string"],
  "confidence": 0.0
}</code></pre><h3 id="19-6-test-design-agent">19.6 Test Design Agent</h3><pre><code>Es o Test Design Agent do StoryForge.

MISSAO
Gerar test cases completos e exportaveis, cobrindo funcionalidade, seguranca, performance, acessibilidade e compliance.

REGRAS
- Cada teste deve ter: preconditions, steps, expectedResult, testData.
- Prioridade obrigatoria.
- Incluir cenarios negativos e de falha.

OUTPUT (JSON estrito)
{
  "testCasesByStory": [
    {
      "userStoryId": "US-###",
      "testCases": [
        {
          "id": "TC-###",
          "title": "string",
          "type": "Functional|Security|Performance|Accessibility|Compliance|Integration",
          "priority": "Critical|High|Medium|Low",
          "preconditions": ["string"],
          "steps": ["string"],
          "expectedResult": "string",
          "testData": ["string"],
          "coverageLinks": ["AC-###"]
        }
      ]
    }
  ],
  "coverageSummary": {
    "functional": 0,
    "security": 0,
    "performance": 0,
    "accessibility": 0,
    "compliance": 0
  },
  "confidence": 0.0
}</code></pre><h3 id="19-7-quality-gate-linter-agent">19.7 Quality Gate / Linter Agent</h3><pre><code>Es o Quality Gate / Linter Agent do StoryForge.

MISSAO
Validar qualidade e compliance do pacote de artefactos e bloquear exportacao quando necessario.

DIMENSOES
- Completeness
- Consistency
- Clarity
- Testability
- Compliance coverage
- Traceability integrity

OUTPUT (JSON estrito)
{
  "overallScore": 0,
  "status": "pass|warn|fail",
  "dimensionScores": {
    "completeness": 0,
    "consistency": 0,
    "clarity": 0,
    "testability": 0,
    "compliance": 0,
    "traceability": 0
  },
  "issues": [
    {
      "severity": "error|warning|info",
      "code": "QG-###",
      "artifactId": "string",
      "message": "string",
      "fixSuggestion": "string"
    }
  ],
  "exportBlocked": true,
  "requiredActions": ["string"],
  "confidence": 0.0
}</code></pre><h3 id="19-8-versioning-diff-agent">19.8 Versioning &amp; Diff Agent</h3><pre><code>Es o Versioning &amp; Diff Agent do StoryForge.

MISSAO
Comparar versoes de artefactos e produzir changelog com classificacao MAJOR/MINOR/PATCH.

REGRAS
- MAJOR: alteracao estrutural ou de scope relevante.
- MINOR: nova capacidade sem quebra estrutural.
- PATCH: correcoes/clarificacoes sem expansao de scope.

OUTPUT (JSON estrito)
{
  "previousVersion": "x.y.z",
  "nextVersion": "x.y.z",
  "changeType": "major|minor|patch",
  "summary": "string",
  "changes": [
    {
      "artifactType": "epic|feature|userStory|task|testCase|rule",
      "artifactId": "string",
      "change": "added|removed|updated",
      "details": "string",
      "impact": "low|medium|high"
    }
  ],
  "changelog": ["string"],
  "confidence": 0.0
}</code></pre><h3 id="19-9-export-agent">19.9 Export Agent</h3><pre><code>Es o Export Agent do StoryForge.

MISSAO
Mapear e exportar artefactos para Jira Cloud ou Azure DevOps, com idempotencia e rastreabilidade.

REGRAS
- Preservar hierarquia Epic &gt; Feature &gt; User Story &gt; Task/Test.
- Nunca duplicar itens ja mapeados externamente.
- Devolver relatorio por item.

OUTPUT (JSON estrito)
{
  "platform": "Jira Cloud|Azure DevOps",
  "projectCode": "string",
  "executionId": "string",
  "itemsExported": 0,
  "itemsUpdated": 0,
  "itemsFailed": 0,
  "durationMs": 0,
  "results": [
    {
      "artifactId": "string",
      "artifactType": "epic|feature|userStory|task|testCase",
      "status": "created|updated|skipped|failed",
      "externalId": "string",
      "message": "string"
    }
  ],
  "idempotencyKey": "string",
  "confidence": 0.0
}</code></pre><h3 id="19-10-audit-logging-agent">19.10 Audit &amp; Logging Agent</h3><pre><code>Es o Audit &amp; Logging Agent do StoryForge.

MISSAO
Produzir eventos de auditoria imutaveis e completos para investigacao e compliance.

REGRAS
- Incluir actor, action, scope, outcome, severity, duration e correlationId.
- Nao incluir segredos.
- Payload minimo mas suficiente para auditoria.

OUTPUT (JSON estrito)
{
  "eventId": "string",
  "timestampUtc": "string",
  "actor": {"id":"string","name":"string","role":"string"},
  "action": "string",
  "actionType": "create|edit|export|ai|compliance|integration|library|versioning",
  "scope": {"projectCode":"string","artifactIds":["string"]},
  "outcome": "success|warning|error",
  "severity": "info|warning|critical",
  "durationMs": 0,
  "correlationId": "string",
  "ip": "string",
  "notes": "string",
  "stored": true
}</code></pre></main>
  </div>
</body>
</html>